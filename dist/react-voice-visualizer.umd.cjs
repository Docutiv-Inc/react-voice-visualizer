(function(){"use strict";(e=>{try{if(typeof window>"u")return;var i=document.createElement("style");i.appendChild(document.createTextNode(e)),document.head.appendChild(i)}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})(".voice-visualizer__buttons-container{display:flex;justify-content:center;align-items:center;column-gap:20px;row-gap:15px;flex-wrap:wrap;margin-bottom:40px}.voice-visualizer__btn-center{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#fff;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s}.voice-visualizer__btn-center:disabled{opacity:.85;cursor:default}.voice-visualizer__btn-center:hover{background-color:#eaeaea;border:4px solid #9f9f9f}.voice-visualizer__btn-center>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause{background-color:#ff3030}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause:hover{background-color:#ff4f4f}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause>img{height:50%;max-height:16px}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent{border-color:transparent}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent:hover{background-color:#fff}.voice-visualizer__btn-left{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#ff3030;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s,opacity .3s}.voice-visualizer__btn-container{min-width:100px;display:flex;justify-content:flex-end}.voice-visualizer__btn-left:hover{background-color:#ff4f4f}.voice-visualizer__btn-left:disabled{opacity:.6;background-color:#ff3030;cursor:default}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone{background-color:#fff}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-left>img{width:auto;height:50%;max-height:16px}.voice-visualizer__btn-left:hover{border:4px solid #9f9f9f}.voice-visualizer__btn{box-sizing:border-box;min-width:100px;min-height:60px;padding:5px 20px;border-radius:40px;font-size:15px;background-color:#f0f0f0;transition:background-color .3s,opacity .3s}.voice-visualizer__btn:disabled{opacity:.8;background-color:#f0f0f0;cursor:default}.voice-visualizer__btn:hover{background-color:#bebebe}.voice-visualizer__canvas-container{position:relative;width:fit-content;margin:0 auto;overflow:hidden}.voice-visualizer__canvas-container canvas{display:block}.voice-visualizer__canvas-microphone-btn{position:absolute;top:50%;left:50%;width:auto;max-width:12%;min-width:24px;height:50%;max-height:100px;background-color:transparent;border:none;outline:none;transform:translate(-50%,-50%)}.voice-visualizer__canvas-microphone-icon{width:100%;height:100%;will-change:transform;transition:transform .3s}.voice-visualizer__canvas-microphone-btn:hover .voice-visualizer__canvas-microphone-icon{transform:scale(1.03)}.voice-visualizer__canvas-audio-wave-icon{position:absolute;top:50%;left:50%;width:auto;max-width:40%;height:40%;max-height:100px;transform:translate(-118%,-50%) scale(-1)}.voice-visualizer__canvas-audio-wave-icon2{transform:translate(18%,-50%)}.voice-visualizer__canvas-audio-processing{position:absolute;top:50%;left:50%;margin:0;transform:translate(-50%,-50%)}.voice-visualizer__progress-indicator-hovered{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#85858599}.voice-visualizer__progress-indicator-hovered-time{position:absolute;top:3%;left:1px;width:fit-content;margin:0;padding:0 7px;opacity:.8;font-size:12px;border-radius:0 4px 4px 0;background-color:#575757;text-align:left}.voice-visualizer__progress-indicator-hovered-time.voice-visualizer__progress-indicator-hovered-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__progress-indicator{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#efefef}.voice-visualizer__progress-indicator-time{position:absolute;top:3%;left:1px;width:fit-content;box-sizing:border-box;min-width:37px;margin:0;padding:0 7px;font-size:12px;border-radius:0 4px 4px 0;text-align:left;color:#000;font-weight:500;background-color:#efefef}.voice-visualizer__progress-indicator-time.voice-visualizer__progress-indicator-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__audio-info-container{box-sizing:border-box;height:55px;display:flex;align-items:center;justify-content:center;gap:30px}.voice-visualizer__audio-info-time{margin:15px 0;min-width:38px;text-align:left}.voice-visualizer__visually-hidden{position:absolute;width:1px;height:1px;margin:-1px;padding:0;border:4px solid #c5c5c5;white-space:nowrap;clip-path:inset(100%);clip:rect(0 0 0 0);overflow:hidden}.voice-visualizer__relative{position:relative}.voice-visualizer__spinner-wrapper{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:52px;height:52px;display:flex;justify-content:center;align-items:center}.voice-visualizer__spinner{flex-shrink:0;width:100%;height:100%;border:4px solid rgba(197,197,197,.5);border-radius:50%;border-top-color:#b7b7b7;animation:voice-visualizer__spin 1s ease-in-out infinite;-webkit-animation:voice-visualizer__spin 1s ease-in-out infinite}@keyframes voice-visualizer__spin{to{transform:rotate(360deg)}}@-webkit-keyframes voice-visualizer__spin{to{transform:rotate(360deg)}}")})();
(function(H,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],c):(H=typeof globalThis<"u"?globalThis:H||self,c(H["react-voice-visualizer"]={},H["react/jsx-runtime"],H.React))})(this,function(H,c,r){"use strict";const xe=({canvas:e,backgroundColor:t})=>{const n=e.height,i=e.width,o=Math.round(i/2),h=e.getContext("2d");return h?(h.clearRect(0,0,i,n),t!=="transparent"&&(h.fillStyle=t,h.fillRect(0,0,i,n)),{context:h,height:n,width:i,halfWidth:o}):null},Ie=({context:e,color:t,rounded:n,x:i,y:o,w:h,h:I})=>{e.fillStyle=t,e.beginPath(),e.roundRect?(e.roundRect(i,o,h,I,n),e.fill()):e.fillRect(i,o,h,I)},Qe=({barsData:e,canvas:t,barWidth:n,gap:i,backgroundColor:o,mainBarColor:h,secondaryBarColor:I,currentAudioTime:v=0,rounded:p,duration:f})=>{const w=xe({canvas:t,backgroundColor:o});if(!w)return;const{context:y,height:z}=w,N=v/f;e.forEach((m,M)=>{const d=M/e.length,a=N>d;Ie({context:y,color:a?I:h,rounded:p,x:M*(n+i*n),y:z/2-m.max,h:m.max*2,w:n})})};function qe({context:e,color:t,rounded:n,width:i,height:o,barWidth:h}){Ie({context:e,color:t,rounded:n,x:i/2+h/2,y:o/2-1,h:2,w:i-(i/2+h/2)})}const Re=({audioData:e,unit:t,index:n,index2:i,canvas:o,isRecordingInProgress:h,isPausedRecording:I,picks:v,backgroundColor:p,barWidth:f,mainBarColor:w,secondaryBarColor:y,rounded:z,animateCurrentPick:N,fullscreen:m})=>{const M=xe({canvas:o,backgroundColor:p});if(!M)return;const{context:d,height:a,width:O,halfWidth:Z}=M;if(e!=null&&e.length&&h){const D=Math.max(...e);if(!I){if(i.current>=f){i.current=0;const A=(a-D/258*a)/a*100,B=(-a+D/258*a*2)/a*100,te=n.current===f?{startY:A,barHeight:B}:null;n.current>=t?n.current=f:n.current+=f,v.length>(m?O:Z)/f&&v.pop(),v.unshift(te)}i.current+=1}!m&&K(),N&&Ie({context:d,rounded:z,color:w,x:m?O:Z,y:a-D/258*a,h:-a+D/258*a*2,w:f});let ee=(m?O:Z)-i.current;v.forEach(A=>{A&&Ie({context:d,color:w,rounded:z,x:ee,y:A.startY*a/100>a/2-1?a/2-1:A.startY*a/100,h:A.barHeight*a/100>2?A.barHeight*a/100:2,w:f}),ee-=f})}else v.length=0;function K(){qe({context:d,color:y,rounded:z,width:O,height:a,barWidth:f})}},Fe=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=e%60,o=Math.floor((i-Math.floor(i))*1e3);return t>0?`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}:${String(o).charAt(0)}`:n>0?`${String(n).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}:${String(o).charAt(0)}`:`${String(Math.floor(i)).padStart(2,"0")}:${String(o).charAt(0)}`},Xe=e=>{const t=Math.floor(e/1e3),n=Math.floor(t/3600),i=Math.floor(t%3600/60),o=t%60;return n>0?`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(o).padStart(2,"0")}`:`${String(i).padStart(2,"0")}:${String(o).padStart(2,"0")}`};function Ue(e){if(typeof e=="string"){const t=Number(e);if(!Number.isNaN(t))return`${Math.trunc(t/2)*2}px`}return e}const Ke=({bufferData:e,height:t,width:n,barWidth:i,gap:o})=>{const h=n/(i+o*i),I=Math.floor(e.length/h),v=t/2;let p=[],f=0;for(let w=0;w<h;w++){const y=[];let z=0;for(let m=0;m<I&&w*I+m<e.length;m++){const M=e[w*I+m];M>0&&(y.push(M),z++)}const N=y.reduce((m,M)=>m+M,0)/z;N>f&&(f=N),p.push({max:N})}if(v*.95>f*v){const w=v*.95/f;p=p.map(y=>({max:y.max>.01?y.max*w:1}))}return p},et=e=>{if(!e)return"";const t=e.match(/audio\/([^;]+)/);return t&&t.length>=2?`.${t[1]}`:""},tt=e=>{const t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=e%60,o=Math.floor((i-Math.floor(i))*1e3);return t>0?`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}}h`:n>0?`${String(n).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}m`:`${String(Math.floor(i)).padStart(2,"0")}:${String(o).charAt(0)}${String(o).charAt(1)}s`},rt=e=>{onmessage=t=>{postMessage(e(t.data))}};function nt({fn:e,initialValue:t,onMessageReceived:n}){const[i,o]=r.useState(t);return{result:i,setResult:o,run:I=>{const v=new Worker(URL.createObjectURL(new Blob([`(${rt})(${e})`])));v.onmessage=p=>{p.data&&(o(p.data),n&&n(),v.terminate())},v.onerror=p=>{console.error(p.message),v.terminate()},v.postMessage(I)}}}const it=(e,t=250)=>{const n=r.useRef();return r.useCallback((...i)=>{const o=()=>{clearTimeout(n.current),e(...i)};clearTimeout(n.current),n.current=setTimeout(o,t)},[e,t])};function st(e){const t=r.useRef(e);return r.useLayoutEffect(()=>{t.current=e},[e]),t}const ft="",ct=({color:e="#000000",stroke:t=2,className:n})=>c.jsx("svg",{viewBox:"0 0 23 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:c.jsx("path",{d:"M1.1 16.72c0 3 .96 5.8 3.61 7.95a9.96 9.96 0 0 0 6.5 2.17m0 0v4.34h4.34-8.67m4.34-4.34c2.35 0 4.42-.48 6.5-2.17a9.87 9.87 0 0 0 3.61-7.95M11.22 1.82c-1.45 0-2.5.37-3.3.93a5.6 5.6 0 0 0-1.84 2.4c-.9 2.06-1.1 4.77-1.1 7.24 0 2.46.2 5.17 1.1 7.24a5.6 5.6 0 0 0 1.84 2.4c.8.55 1.85.92 3.3.92 1.44 0 2.5-.37 3.29-.93a5.6 5.6 0 0 0 1.84-2.4c.9-2.06 1.1-4.77 1.1-7.23 0-2.47-.2-5.18-1.1-7.24a5.6 5.6 0 0 0-1.84-2.4 5.52 5.52 0 0 0-3.3-.93Z",stroke:e,strokeWidth:t,strokeLinecap:"round",strokeLinejoin:"round"})}),Ye=({color:e="#FFFFFF",reflect:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0.92 17.54 48.27 14.92",className:`voice-visualizer__canvas-audio-wave-icon ${t?"voice-visualizer__canvas-audio-wave-icon2":""}`,children:c.jsx("path",{d:"M.92 24.63h.21v.75H.92zm.42-1.39h.21v3.52h-.21zm.43.68h.21v2.17h-.21zM2.2 22h.21v6.01H2.2zm.43-1.27h.21v8.55h-.21zm.43 2.07h.21v4.4h-.21zm.43 1.22h.21v1.97h-.21zm.43.47h.21v1.03h-.21zm.43-1.66h.21v4.35h-.21zm.43-1.74h.21v7.82h-.21zm.43 1.94h.21v3.94h-.21zm.43 1.07h.21v1.81h-.21zm.42-.94h.21v3.68h-.21zm.43.91h.21v1.86h-.21zm.43-.23h.21v2.33h-.21zm.43.46h.21v1.4h-.21zm.43-.7h.21v2.8h-.21zm.43-1.6h.21v6.01h-.21zm.43-2.23h.21v10.46h-.21zm.43-1.4h.21v13.26h-.21zm.43.62h.21v12.02H9.5zm.43 1.64h.21v8.75h-.21zm.43 1.37h.21v6.01h-.21zm.43-1.87H11v9.74h-.21zm.42 1.32h.21v7.1h-.21zm.43-2.64h.21v12.38h-.21zm.43 1.61h.21v9.17h-.21zM12.5 22h.21v6.01h-.21zm.43 1.32h.21v3.37h-.21zm.43-2.51h.21v8.39h-.21zm.43.59H14v7.2h-.21zm.43 1.79h.21v3.62h-.21zm.43.41h.21v2.8h-.21zm.43.57h.21v1.66h-.21zm.43-1.11h.21v3.88h-.21zm.42-2.98h.21v9.84h-.21zm.43 1.06h.21v7.72h-.21zm.43 3.19H17v1.35h-.21zm.86-2.33h.21v6.01h-.21zm-.43 1.4h.21v3.21h-.21zm1.29.15h.21v2.9h-.21zm.43.68h.21v1.55h-.21zm-.86-.76h.21v3.05h-.21zm1.29-.05h.21v3.16h-.21zm.43-.64h.21v4.45h-.21zm.43.38h.21v3.68h-.21zm.42-.49h.21v4.66h-.21zm.43 1.32h.21v2.02h-.21zm.43.37h.21v1.29h-.21zm.43.31h.21v.67h-.21zm.43-.39h.21v1.45h-.21zm.43-1.35h.21v4.14h-.21zm.86.73h.21v2.69h-.21zm-.43.44h.21v1.81h-.21zm1.29-3.45h.21v8.7h-.21zm.43 1.71h.21v5.28h-.21zm-.86-2.3h.21v9.89h-.21zm1.29 3.36h.21v3.16h-.21zM25.8 22h.21v6.01h-.21zm.43 1.42h.21v3.16h-.21zm.43.88h.21v1.4h-.21zm.43-.93h.21v3.26h-.21zm.43-1.37h.21v6.01h-.21zm.43-.93h.21v7.87h-.21zm.43-.76h.21v9.38h-.21zm.43 1.69h.21v6.01h-.21zm.86 1.92h.21v2.17h-.21zm-.43-.6h.21v3.37h-.21zm1.28.05h.21v3.26h-.21zm.43.67h.21v1.91h-.21zm-.85-.51h.21v2.95h-.21zm1.28-.13h.21v3.21h-.21zm.43-1.4h.21v6.01h-.21zm.43-.99h.21v7.98h-.21zm.43 1.77h.21v4.45h-.21zm.43-1.22h.21v6.89h-.21zm.43 1.6h.21v3.68h-.21zm.43-.28h.21v4.25h-.21zm.43-.6h.21v5.44h-.21zm.43-.28h.21v6.01h-.21zm.85 2.02h.21v1.97h-.21zm-.43-.57h.21v3.11h-.21zm1.29.93h.21v1.24h-.21zm.43-.65h.21v2.54h-.21zm-.86-.28h.21v3.11h-.21zm1.29.83h.21v1.45h-.21zm.43-.99h.21v3.42h-.21zm.43-.1h.21v3.62h-.21zm.43-.7h.21v5.02h-.21zm.43.8h.21v3.42h-.21zm.43-1.29h.21v6.01h-.21zm.42-1.71h.21v9.43h-.21zm.43 2.38h.21v4.66h-.21zm.43.65h.21v3.37h-.21zm.86.08h.21v3.21h-.21zm-.43.54h.21v2.12h-.21zm1.29-.05h.21v2.23h-.21zm.43.28h.21v1.66h-.21zm-.86.16h.21v1.35h-.21zm1.29.21h.21v.93h-.21zm.43-6.04h.21v13h-.21zm.43.8h.21v11.4h-.21zm.43-1.76h.21v14.92h-.21zm.42 1.09h.21v12.74h-.21zm.43 1.17h.21v10.41h-.21zm.43 1.32h.21v7.77h-.21zm.43 1.6h.21v4.56h-.21zm.43 1.17h.21v2.23h-.21zm.86-.08h.21v2.38h-.21zm-.43-.34h.21v3.05h-.21zm1.29-.1h.21v3.26h-.21zm.43.93h.21v1.4h-.21zm-.86-.02h.21v1.45h-.21z",fill:e})}),Ge="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjMiIGhlaWdodD0iMzMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTEuMSAxNi43MmMwIDMgLjk2IDUuOCAzLjYxIDcuOTVhOS45NiA5Ljk2IDAgMCAwIDYuNSAyLjE3bTAgMHY0LjM0aDQuMzQtOC42N200LjM0LTQuMzRjMi4zNSAwIDQuNDItLjQ4IDYuNS0yLjE3YTkuODcgOS44NyAwIDAgMCAzLjYxLTcuOTVNMTEuMjIgMS44MmMtMS40NSAwLTIuNS4zNy0zLjMuOTNhNS42IDUuNiAwIDAgMC0xLjg0IDIuNGMtLjkgMi4wNi0xLjEgNC43Ny0xLjEgNy4yNCAwIDIuNDYuMiA1LjE3IDEuMSA3LjI0YTUuNiA1LjYgMCAwIDAgMS44NCAyLjRjLjguNTUgMS44NS45MiAzLjMuOTIgMS40NCAwIDIuNS0uMzcgMy4yOS0uOTNhNS42IDUuNiAwIDAgMCAxLjg0LTIuNGMuOS0yLjA2IDEuMS00Ljc3IDEuMS03LjIzIDAtMi40Ny0uMi01LjE4LTEuMS03LjI0YTUuNiA1LjYgMCAwIDAtMS44NC0yLjQgNS41MiA1LjUyIDAgMCAwLTMuMy0uOTNaIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K",ot="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE4Ljc1IDYuMTZjNC4zMSAyLjYgNi40NiAzLjkgNi40NiA1Ljg0IDAgMS45NS0yLjE1IDMuMjQtNi40NiA1Ljg0bC00Ljg0IDIuOTJjLTQuMzEgMi42LTYuNDYgMy44OS04LjA4IDIuOTItMS42Mi0uOTgtMS42Mi0zLjU3LTEuNjItOC43NlY5LjA4YzAtNS4xOSAwLTcuNzggMS42Mi04Ljc2IDEuNjItLjk3IDMuNzcuMzMgOC4wOCAyLjkybDQuODQgMi45MloiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==",Pe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE0IDMuNWEzLjUgMy41IDAgMSAxIDcgMHYyMmEzLjUgMy41IDAgMSAxLTcgMHYtMjJaIiBmaWxsPSIjZmZmIi8+CiAgPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjkiIHJ4PSIzLjUiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==",ut="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMjUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3QgeD0iLjIxIiB3aWR0aD0iMjYiIGhlaWdodD0iMjUiIHJ4PSI1IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=",at=({controls:{audioRef:e,audioData:t,isRecordingInProgress:n,recordedBlob:i,duration:o,currentAudioTime:h,audioSrc:I,bufferFromRecordedBlob:v,togglePauseResume:p,startRecording:f,stopRecording:w,saveAudioFile:y,isAvailableRecordedAudio:z,isPausedRecordedAudio:N,isPausedRecording:m,isProcessingStartRecording:M,isProcessingRecordedAudio:d,isCleared:a,formattedDuration:O,formattedRecordingTime:Z,formattedRecordedAudioCurrentTime:K,clearCanvas:D,setCurrentAudioTime:ee,isProcessingOnResize:A,_setIsProcessingOnResize:B,_setIsProcessingAudioOnComplete:te},width:ve="100%",height:W=200,speed:me=3,backgroundColor:_="transparent",mainBarColor:b="#FFFFFF",secondaryBarColor:k="#5e5e5e",barWidth:F=2,gap:de=1,rounded:re=5,isControlPanelShown:ne=!0,isDownloadAudioButtonShown:ie=!1,animateCurrentPick:V=!0,fullscreen:J=!1,onlyRecording:U=!1,isDefaultUIShown:fe=!0,defaultMicrophoneIconColor:we=b,defaultAudioWaveIconColor:Le=b,mainContainerClassName:Ne,canvasContainerClassName:ze,isProgressIndicatorShown:se=!U,progressIndicatorClassName:ye,isProgressIndicatorTimeShown:ce=!0,progressIndicatorTimeClassName:$e,isProgressIndicatorOnHoverShown:Ae=!U,progressIndicatorOnHoverClassName:g,isProgressIndicatorTimeOnHoverShown:je=!0,progressIndicatorTimeOnHoverClassName:C,isAudioProcessingTextShown:Q=!0,audioProcessingTextClassName:oe,controlButtonsClassName:Y})=>{const[j,x]=r.useState(0),[u,Te]=r.useState(0),[ge,He]=r.useState(0),[Me,Ce]=r.useState(0),[q,Se]=r.useState(!1),[De,Ee]=r.useState(window.innerWidth),[ue,_e]=r.useState(!1),ae=De<768,R=Math.trunc(me),he=Math.trunc(de),$=Math.trunc(ae&&he>0?F+1:F),X=$+he*$,S=r.useRef(null),be=r.useRef([]),G=r.useRef(R),Oe=r.useRef($),s=r.useRef($),l=r.useRef(null),E=st(De),{result:L,setResult:le,run:lt}=nt({fn:Ke,initialValue:[],onMessageReceived:mt}),vt=it(Ze);r.useEffect(()=>{Ze();const T=()=>{E.current!==window.innerWidth&&(z?(Ee(window.innerWidth),B(!0),_e(!0),vt()):(Ee(window.innerWidth),Ze()))};return window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T)}},[ve,z]),r.useLayoutEffect(()=>{S.current&&((G.current>=R||!t.length)&&(G.current=t.length?0:R,Re({audioData:t,unit:X,index:Oe,index2:s,canvas:S.current,picks:be.current,isRecordingInProgress:n,isPausedRecording:m,backgroundColor:_,mainBarColor:b,secondaryBarColor:k,barWidth:$,rounded:re,animateCurrentPick:V,fullscreen:J})),G.current+=1)},[S.current,t,$,_,b,k,re,J,fe,Me]),r.useEffect(()=>{var T,P;if(z)return q?(T=S.current)==null||T.addEventListener("mouseleave",We):(P=S.current)==null||P.addEventListener("mouseenter",Be),()=>{var pe,Je;q?(pe=S.current)==null||pe.removeEventListener("mouseleave",We):(Je=S.current)==null||Je.removeEventListener("mouseenter",Be)}},[q,z]),r.useEffect(()=>{var P;if(!v||!S.current||n||ue)return;if(U){D();return}be.current=[];const T=v.getChannelData(0);return lt({bufferData:T,height:ge,width:Me,barWidth:$,gap:he}),(P=S.current)==null||P.addEventListener("mousemove",ke),()=>{var pe;(pe=S.current)==null||pe.removeEventListener("mousemove",ke)}},[v,u,ge,de,F,ue]),r.useEffect(()=>{if(!(U||!(L!=null&&L.length)||!S.current||d)){if(a){le([]);return}Qe({barsData:L,canvas:S.current,barWidth:$,gap:he,backgroundColor:_,mainBarColor:b,secondaryBarColor:k,currentAudioTime:h,rounded:re,duration:o})}},[L,h,a,re,_,b,k]),r.useEffect(()=>{d&&S.current&&xe({canvas:S.current,backgroundColor:_})},[d]);function Ze(){if(!l.current||!S.current)return;G.current=R;const T=Math.trunc(l.current.clientHeight*window.devicePixelRatio/2)*2;Te(l.current.clientWidth),He(T),Ce(Math.round(l.current.clientWidth*window.devicePixelRatio)),_e(!1)}function mt(){B(!1),te(!1),e!=null&&e.current&&!A&&(e.current.src=I)}const Be=()=>{Se(!0)},We=()=>{Se(!1)},ke=T=>{x(T.offsetX)},dt=T=>{if(e!=null&&e.current&&S.current){const P=o/u*(T.clientX-S.current.getBoundingClientRect().left);e.current.currentTime=P,ee(P)}},Ve=h/o*u;return c.jsxs("div",{className:`voice-visualizer ${Ne??""}`,children:[c.jsxs("div",{className:`voice-visualizer__canvas-container ${ze??""}`,ref:l,style:{width:Ue(ve)},children:[c.jsx("canvas",{ref:S,width:Me,height:ge,onClick:dt,style:{height:Ue(W),width:u},children:"Your browser does not support HTML5 Canvas."}),fe&&a&&c.jsxs(c.Fragment,{children:[c.jsx(Ye,{color:Le}),c.jsx(Ye,{color:Le,reflect:!0}),c.jsx("button",{onClick:f,className:"voice-visualizer__canvas-microphone-btn",children:c.jsx(ct,{color:we,stroke:.5,className:"voice-visualizer__canvas-microphone-icon"})})]}),Q&&d&&c.jsx("p",{className:`voice-visualizer__canvas-audio-processing ${oe??""}`,style:{color:b},children:"Processing Audio..."}),q&&z&&!d&&!ae&&Ae&&c.jsx("div",{className:`voice-visualizer__progress-indicator-hovered ${g??""}`,style:{left:j},children:je&&c.jsx("p",{className:`voice-visualizer__progress-indicator-hovered-time 
                    ${u-j<70?"voice-visualizer__progress-indicator-hovered-time-left":""} 
                    ${C??""}`,children:Fe(o/u*j)})}),se&&z&&!d&&o?c.jsx("div",{className:`voice-visualizer__progress-indicator ${ye??""}`,style:{left:Ve<u-1?Ve:u-1},children:ce&&c.jsx("p",{className:`voice-visualizer__progress-indicator-time ${u-h*u/o<70?"voice-visualizer__progress-indicator-time-left":""} ${$e??""}`,children:K})}):null]}),ne&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"voice-visualizer__audio-info-container",children:[n&&c.jsx("p",{className:"voice-visualizer__audio-info-time",children:Z}),o&&!d?c.jsx("p",{children:O}):null]}),c.jsxs("div",{className:"voice-visualizer__buttons-container",children:[n&&c.jsx("div",{className:"voice-visualizer__btn-container",children:c.jsx("button",{className:`voice-visualizer__btn-left ${m?"voice-visualizer__btn-left-microphone":""}`,onClick:p,children:c.jsx("img",{src:m?Ge:Pe,alt:m?"Play":"Pause"})})}),!a&&c.jsx("button",{className:`voice-visualizer__btn-left ${n||M?"voice-visualizer__visually-hidden":""}`,onClick:p,disabled:d,children:c.jsx("img",{src:N?ot:Pe,alt:N?"Play":"Pause"})}),a&&c.jsxs("button",{className:`voice-visualizer__btn-center voice-visualizer__relative ${M?"voice-visualizer__btn-center--border-transparent":""}`,onClick:f,disabled:M,children:[M&&c.jsx("div",{className:"voice-visualizer__spinner-wrapper",children:c.jsx("div",{className:"voice-visualizer__spinner"})}),c.jsx("img",{src:Ge,alt:"Microphone"})]}),c.jsx("button",{className:`voice-visualizer__btn-center voice-visualizer__btn-center-pause ${n?"":"voice-visualizer__visually-hidden"}`,onClick:w,children:c.jsx("img",{src:ut,alt:"Stop"})}),!a&&c.jsx("button",{onClick:D,className:`voice-visualizer__btn ${Y??""}`,disabled:d,children:"Clear"}),ie&&i&&c.jsx("button",{onClick:y,className:`voice-visualizer__btn ${Y??""}`,disabled:d,children:"Download Audio"})]})]})]})};function ht({inputDeviceId:e,streamConfig:t,onStartRecording:n,onStopRecording:i,onPausedRecording:o,onResumedRecording:h,onClearCanvas:I,onEndAudioPlayback:v,onStartAudioPlayback:p,onPausedAudioPlayback:f,onResumedAudioPlayback:w,onErrorPlayingAudio:y}={}){const[z,N]=r.useState(!1),[m,M]=r.useState(!1),[d,a]=r.useState(null),[O,Z]=r.useState(new Uint8Array(0)),[K,D]=r.useState(!1),[ee,A]=r.useState(null),[B,te]=r.useState(null),[ve,W]=r.useState(0),[me,_]=r.useState(0),[b,k]=r.useState(0),[F,de]=r.useState(""),[re,ne]=r.useState(!0),[ie,V]=r.useState(0),[J,U]=r.useState(!0),[fe,we]=r.useState(!1),[Le,Ne]=r.useState(!1),[ze,se]=r.useState(null),[ye,ce]=r.useState(!1),[$e,Ae]=r.useState(0),g=r.useRef(null),je=r.useRef(""),C=r.useRef(null),Q=r.useRef(null),oe=r.useRef(null),Y=r.useRef(null),j=r.useRef(null),x=r.useRef(null),u=r.useRef(null),Te=!!(B&&!K),ge=tt(b),He=Xe(ve),Me=Fe(ie),Ce=fe||K;r.useEffect(()=>{if(!z||m)return;const l=setInterval(()=>{const E=performance.now();W(L=>L+(E-me)),_(E)},1e3);return()=>clearInterval(l)},[me,m,z]),r.useEffect(()=>{if(ze){X();return}},[ze]),r.useEffect(()=>()=>{X()},[]),r.useEffect(()=>(J||window.addEventListener("beforeunload",q),()=>{window.removeEventListener("beforeunload",q)}),[J]);const q=s=>{s.preventDefault(),s.returnValue=""},Se=async s=>{if(s)try{if(s.size===0)throw new Error("Error: The audio blob is empty");const l=URL.createObjectURL(s);de(l);const E=await s.arrayBuffer(),le=await new AudioContext().decodeAudioData(E);te(le),k(le.duration-.06),se(null)}catch(l){console.error("Error processing the audio blob:",l),se(l instanceof Error?l:new Error("Error processing the audio blob"))}},De=s=>{s instanceof Blob&&(X(),Ne(!0),U(!1),D(!0),N(!1),W(0),M(!1),u.current=new Audio,A(s),Se(s))},Ee=()=>{ce(!0),je.current=`rec_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,Ae(0),navigator.mediaDevices.getUserMedia({audio:e?{deviceId:e}:!0}).then(s=>{U(!1),ce(!1),N(!0),_(performance.now()),a(s),C.current=new window.AudioContext,Q.current=C.current.createAnalyser(),oe.current=new Uint8Array(Q.current.frequencyBinCount),Y.current=C.current.createMediaStreamSource(s),Y.current.connect(Q.current),g.current=new MediaRecorder(s),g.current.addEventListener("dataavailable",ae),t!=null&&t.enabled&&t.timeslice?g.current.start(t.timeslice):g.current.start(),n&&n(),ue()}).catch(s=>{ce(!1),se(s instanceof Error?s:new Error("Error starting audio recording"))})},ue=()=>{Q.current.getByteTimeDomainData(oe.current),Z(new Uint8Array(oe.current)),j.current=requestAnimationFrame(ue)},_e=(s,l=!1)=>{var E;if(!(!t||!t.enabled||!t.onChunkAvailable)&&s.size>0){const L={recordingId:je.current,chunkSequence:$e,mimeType:((E=g.current)==null?void 0:E.mimeType)||"audio/webm",isLastChunk:l};t.onChunkAvailable(s,L),Ae(le=>le+1)}},ae=s=>{if(t!=null&&t.enabled&&s.data.size>0){const l=!g.current||g.current.state==="inactive";_e(s.data,l)}g.current||(u.current=new Audio,A(s.data),Se(s.data))},R=()=>{u.current&&(V(u.current.currentTime),x.current=requestAnimationFrame(R))},he=()=>{z||ye||(J||X(),Ee())},$=()=>{z&&(N(!1),g.current&&(g.current.stop(),g.current.removeEventListener("dataavailable",ae)),d==null||d.getTracks().forEach(s=>s.stop()),j.current&&cancelAnimationFrame(j.current),Y.current&&Y.current.disconnect(),C.current&&C.current.state!=="closed"&&C.current.close(),D(!0),W(0),M(!1),i&&i())},X=()=>{j.current&&(cancelAnimationFrame(j.current),j.current=null),x.current&&(cancelAnimationFrame(x.current),x.current=null),g.current&&(g.current.removeEventListener("dataavailable",ae),g.current.stop(),g.current=null),d==null||d.getTracks().forEach(s=>s.stop()),u!=null&&u.current&&(u.current.removeEventListener("ended",G),u.current.pause(),u.current.src="",u.current=null),C.current=null,Q.current=null,oe.current=null,Y.current=null,a(null),ce(!1),N(!1),Ne(!1),D(!1),A(null),te(null),W(0),_(0),k(0),de(""),V(0),ne(!0),M(!1),we(!1),Z(new Uint8Array(0)),se(null),U(!0),I&&I()},S=()=>{if(u.current&&u.current.paused){const s=u.current.play();s!==void 0&&s.catch(l=>{console.error(l),y&&y(l instanceof Error?l:new Error("Error playing audio"))})}},be=()=>{var s,l,E;if(z){M(L=>!L),((s=g.current)==null?void 0:s.state)==="recording"?((l=g.current)==null||l.pause(),W(L=>L+(performance.now()-me)),j.current&&cancelAnimationFrame(j.current),o&&o()):(j.current=requestAnimationFrame(ue),(E=g.current)==null||E.resume(),_(performance.now()),h&&h());return}if(u.current&&Te)if(u.current.paused)requestAnimationFrame(R),S(),u.current.addEventListener("ended",G),ne(!1),p&&ie===0&&p(),w&&ie!==0&&w();else{x.current&&cancelAnimationFrame(x.current),u.current.removeEventListener("ended",G),u.current.pause(),ne(!0);const L=u.current.currentTime;V(L),u.current.currentTime=L,f&&f()}},G=()=>{x.current&&cancelAnimationFrame(x.current),ne(!0),u!=null&&u.current&&(u.current.currentTime=0,V(0),v&&v())},Oe=()=>{var l;if(!F)return;const s=document.createElement("a");s.href=F,s.download=`recorded_audio${et((l=g.current)==null?void 0:l.mimeType)}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(F)};return{audioRef:u,isRecordingInProgress:z,isPausedRecording:m,audioData:O,recordingTime:ve,isProcessingRecordedAudio:Ce,recordedBlob:ee,mediaRecorder:g.current,duration:b,currentAudioTime:ie,audioSrc:F,isPausedRecordedAudio:re,bufferFromRecordedBlob:B,isCleared:J,isAvailableRecordedAudio:Te,formattedDuration:ge,formattedRecordingTime:He,formattedRecordedAudioCurrentTime:Me,startRecording:he,togglePauseResume:be,stopRecording:$,saveAudioFile:Oe,clearCanvas:X,setCurrentAudioTime:V,error:ze,isProcessingOnResize:fe,isProcessingStartRecording:ye,isPreloadedBlob:Le,setPreloadedAudioBlob:De,_setIsProcessingAudioOnComplete:D,_setIsProcessingOnResize:we}}H.VoiceVisualizer=at,H.useVoiceVisualizer=ht,Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})});
