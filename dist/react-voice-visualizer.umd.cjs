(function(){"use strict";(e=>{try{if(typeof window>"u")return;var i=document.createElement("style");i.appendChild(document.createTextNode(e)),document.head.appendChild(i)}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})(".voice-visualizer__buttons-container{display:flex;justify-content:center;align-items:center;column-gap:20px;row-gap:15px;flex-wrap:wrap;margin-bottom:40px}.voice-visualizer__btn-center{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#fff;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s}.voice-visualizer__btn-center:disabled{opacity:.85;cursor:default}.voice-visualizer__btn-center:hover{background-color:#eaeaea;border:4px solid #9f9f9f}.voice-visualizer__btn-center>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause{background-color:#ff3030}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause:hover{background-color:#ff4f4f}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause>img{height:50%;max-height:16px}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent{border-color:transparent}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent:hover{background-color:#fff}.voice-visualizer__btn-left{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#ff3030;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s,opacity .3s}.voice-visualizer__btn-container{min-width:100px;display:flex;justify-content:flex-end}.voice-visualizer__btn-left:hover{background-color:#ff4f4f}.voice-visualizer__btn-left:disabled{opacity:.6;background-color:#ff3030;cursor:default}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone{background-color:#fff}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-left>img{width:auto;height:50%;max-height:16px}.voice-visualizer__btn-left:hover{border:4px solid #9f9f9f}.voice-visualizer__btn{box-sizing:border-box;min-width:100px;min-height:60px;padding:5px 20px;border-radius:40px;font-size:15px;background-color:#f0f0f0;transition:background-color .3s,opacity .3s}.voice-visualizer__btn:disabled{opacity:.8;background-color:#f0f0f0;cursor:default}.voice-visualizer__btn:hover{background-color:#bebebe}.voice-visualizer__canvas-container{position:relative;width:fit-content;margin:0 auto;overflow:hidden}.voice-visualizer__canvas-container canvas{display:block}.voice-visualizer__canvas-microphone-btn{position:absolute;top:50%;left:50%;width:auto;max-width:12%;min-width:24px;height:50%;max-height:100px;background-color:transparent;border:none;outline:none;transform:translate(-50%,-50%)}.voice-visualizer__canvas-microphone-icon{width:100%;height:100%;will-change:transform;transition:transform .3s}.voice-visualizer__canvas-microphone-btn:hover .voice-visualizer__canvas-microphone-icon{transform:scale(1.03)}.voice-visualizer__canvas-audio-wave-icon{position:absolute;top:50%;left:50%;width:auto;max-width:40%;height:40%;max-height:100px;transform:translate(-118%,-50%) scale(-1)}.voice-visualizer__canvas-audio-wave-icon2{transform:translate(18%,-50%)}.voice-visualizer__canvas-audio-processing{position:absolute;top:50%;left:50%;margin:0;transform:translate(-50%,-50%)}.voice-visualizer__progress-indicator-hovered{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#85858599}.voice-visualizer__progress-indicator-hovered-time{position:absolute;top:3%;left:1px;width:fit-content;margin:0;padding:0 7px;opacity:.8;font-size:12px;border-radius:0 4px 4px 0;background-color:#575757;text-align:left}.voice-visualizer__progress-indicator-hovered-time.voice-visualizer__progress-indicator-hovered-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__progress-indicator{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#efefef}.voice-visualizer__progress-indicator-time{position:absolute;top:3%;left:1px;width:fit-content;box-sizing:border-box;min-width:37px;margin:0;padding:0 7px;font-size:12px;border-radius:0 4px 4px 0;text-align:left;color:#000;font-weight:500;background-color:#efefef}.voice-visualizer__progress-indicator-time.voice-visualizer__progress-indicator-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__audio-info-container{box-sizing:border-box;height:55px;display:flex;align-items:center;justify-content:center;gap:30px}.voice-visualizer__audio-info-time{margin:15px 0;min-width:38px;text-align:left}.voice-visualizer__visually-hidden{position:absolute;width:1px;height:1px;margin:-1px;padding:0;border:4px solid #c5c5c5;white-space:nowrap;clip-path:inset(100%);clip:rect(0 0 0 0);overflow:hidden}.voice-visualizer__relative{position:relative}.voice-visualizer__spinner-wrapper{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:52px;height:52px;display:flex;justify-content:center;align-items:center}.voice-visualizer__spinner{flex-shrink:0;width:100%;height:100%;border:4px solid rgba(197,197,197,.5);border-radius:50%;border-top-color:#b7b7b7;animation:voice-visualizer__spin 1s ease-in-out infinite;-webkit-animation:voice-visualizer__spin 1s ease-in-out infinite}@keyframes voice-visualizer__spin{to{transform:rotate(360deg)}}@-webkit-keyframes voice-visualizer__spin{to{transform:rotate(360deg)}}")})();
(function(C,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],s):(C=typeof globalThis<"u"?globalThis:C||self,s(C["react-voice-visualizer"]={},C["react/jsx-runtime"],C.React))})(this,function(C,s,n){"use strict";const Ue=({canvas:t,backgroundColor:e})=>{const r=t.height,c=t.width,u=Math.round(c/2),h=t.getContext("2d");return h?(h.clearRect(0,0,c,r),e!=="transparent"&&(h.fillStyle=e,h.fillRect(0,0,c,r)),{context:h,height:r,width:c,halfWidth:u}):null},ye=({context:t,color:e,rounded:r,x:c,y:u,w:h,h:L})=>{t.fillStyle=e,t.beginPath(),t.roundRect?(t.roundRect(c,u,h,L,r),t.fill()):t.fillRect(c,u,h,L)},Xe=({barsData:t,canvas:e,barWidth:r,gap:c,backgroundColor:u,mainBarColor:h,secondaryBarColor:L,currentAudioTime:m=0,rounded:w,duration:S})=>{const N=Ue({canvas:e,backgroundColor:u});if(!N)return;const{context:j,height:f}=N,y=m/S;t.forEach((v,I)=>{const z=I/t.length,a=y>z;ye({context:j,color:a?L:h,rounded:w,x:I*(r+c*r),y:f/2-v.max,h:v.max*2,w:r})})};function Ke({context:t,color:e,rounded:r,width:c,height:u,barWidth:h}){ye({context:t,color:e,rounded:r,x:c/2+h/2,y:u/2-1,h:2,w:c-(c/2+h/2)})}const et=({audioData:t,unit:e,index:r,index2:c,canvas:u,isRecordingInProgress:h,isPausedRecording:L,picks:m,backgroundColor:w,barWidth:S,mainBarColor:N,secondaryBarColor:j,rounded:f,animateCurrentPick:y,fullscreen:v})=>{const I=Ue({canvas:u,backgroundColor:w});if(!I)return;const{context:z,height:a,width:U,halfWidth:Z}=I;if(t!=null&&t.length&&h){const T=Math.max(...t);if(!L){if(c.current>=S){c.current=0;const D=(a-T/258*a)/a*100,V=(-a+T/258*a*2)/a*100,re=r.current===S?{startY:D,barHeight:V}:null;r.current>=e?r.current=S:r.current+=S,m.length>(v?U:Z)/S&&m.pop(),m.unshift(re)}c.current+=1}!v&&ne(),y&&ye({context:z,rounded:f,color:N,x:v?U:Z,y:a-T/258*a,h:-a+T/258*a*2,w:S});let F=(v?U:Z)-c.current;m.forEach(D=>{D&&ye({context:z,color:N,rounded:f,x:F,y:D.startY*a/100>a/2-1?a/2-1:D.startY*a/100,h:D.barHeight*a/100>2?D.barHeight*a/100:2,w:S}),F-=S})}else m.length=0;function ne(){Ke({context:z,color:j,rounded:f,width:U,height:a,barWidth:S})}},Ge=t=>{const e=Math.floor(t/3600),r=Math.floor(t%3600/60),c=t%60,u=Math.floor((c-Math.floor(c))*1e3);return e>0?`${String(e).padStart(2,"0")}:${String(r).padStart(2,"0")}:${String(Math.floor(c)).padStart(2,"0")}:${String(u).charAt(0)}`:r>0?`${String(r).padStart(2,"0")}:${String(Math.floor(c)).padStart(2,"0")}:${String(u).charAt(0)}`:`${String(Math.floor(c)).padStart(2,"0")}:${String(u).charAt(0)}`},tt=t=>{const e=Math.floor(t/1e3),r=Math.floor(e/3600),c=Math.floor(e%3600/60),u=e%60;return r>0?`${String(r).padStart(2,"0")}:${String(c).padStart(2,"0")}:${String(u).padStart(2,"0")}`:`${String(c).padStart(2,"0")}:${String(u).padStart(2,"0")}`};function Be(t){if(typeof t=="string"){const e=Number(t);if(!Number.isNaN(e))return`${Math.trunc(e/2)*2}px`}return t}const nt=({bufferData:t,height:e,width:r,barWidth:c,gap:u})=>{const h=r/(c+u*c),L=Math.floor(t.length/h),m=e/2;let w=[],S=0;for(let N=0;N<h;N++){const j=[];let f=0;for(let v=0;v<L&&N*L+v<t.length;v++){const I=t[N*L+v];I>0&&(j.push(I),f++)}const y=j.reduce((v,I)=>v+I,0)/f;y>S&&(S=y),w.push({max:y})}if(m*.95>S*m){const N=m*.95/S;w=w.map(j=>({max:j.max>.01?j.max*N:1}))}return w},rt=t=>{if(!t)return"";const e=t.match(/audio\/([^;]+)/);return e&&e.length>=2?`.${e[1]}`:""},ct=t=>{const e=Math.floor(t/3600),r=Math.floor(t%3600/60),c=t%60,u=Math.floor((c-Math.floor(c))*1e3);return e>0?`${String(e).padStart(2,"0")}:${String(r).padStart(2,"0")}:${String(Math.floor(c)).padStart(2,"0")}}h`:r>0?`${String(r).padStart(2,"0")}:${String(Math.floor(c)).padStart(2,"0")}m`:`${String(Math.floor(c)).padStart(2,"0")}:${String(u).charAt(0)}${String(u).charAt(1)}s`},it=t=>{onmessage=e=>{postMessage(t(e.data))}};function st({fn:t,initialValue:e,onMessageReceived:r}){const[c,u]=n.useState(e);return{result:c,setResult:u,run:L=>{const m=new Worker(URL.createObjectURL(new Blob([`(${it})(${t})`])));m.onmessage=w=>{w.data&&(u(w.data),r&&r(),m.terminate())},m.onerror=w=>{console.error(w.message),m.terminate()},m.postMessage(L)}}}const ut=(t,e=250)=>{const r=n.useRef();return n.useCallback((...c)=>{const u=()=>{clearTimeout(r.current),t(...c)};clearTimeout(r.current),r.current=setTimeout(u,e)},[t,e])};function ot(t){const e=n.useRef(t);return n.useLayoutEffect(()=>{e.current=t},[t]),e}const ft="",at=({color:t="#000000",stroke:e=2,className:r})=>s.jsx("svg",{viewBox:"0 0 23 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,children:s.jsx("path",{d:"M1.1 16.72c0 3 .96 5.8 3.61 7.95a9.96 9.96 0 0 0 6.5 2.17m0 0v4.34h4.34-8.67m4.34-4.34c2.35 0 4.42-.48 6.5-2.17a9.87 9.87 0 0 0 3.61-7.95M11.22 1.82c-1.45 0-2.5.37-3.3.93a5.6 5.6 0 0 0-1.84 2.4c-.9 2.06-1.1 4.77-1.1 7.24 0 2.46.2 5.17 1.1 7.24a5.6 5.6 0 0 0 1.84 2.4c.8.55 1.85.92 3.3.92 1.44 0 2.5-.37 3.29-.93a5.6 5.6 0 0 0 1.84-2.4c.9-2.06 1.1-4.77 1.1-7.23 0-2.47-.2-5.18-1.1-7.24a5.6 5.6 0 0 0-1.84-2.4 5.52 5.52 0 0 0-3.3-.93Z",stroke:t,strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"})}),We=({color:t="#FFFFFF",reflect:e})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0.92 17.54 48.27 14.92",className:`voice-visualizer__canvas-audio-wave-icon ${e?"voice-visualizer__canvas-audio-wave-icon2":""}`,children:s.jsx("path",{d:"M.92 24.63h.21v.75H.92zm.42-1.39h.21v3.52h-.21zm.43.68h.21v2.17h-.21zM2.2 22h.21v6.01H2.2zm.43-1.27h.21v8.55h-.21zm.43 2.07h.21v4.4h-.21zm.43 1.22h.21v1.97h-.21zm.43.47h.21v1.03h-.21zm.43-1.66h.21v4.35h-.21zm.43-1.74h.21v7.82h-.21zm.43 1.94h.21v3.94h-.21zm.43 1.07h.21v1.81h-.21zm.42-.94h.21v3.68h-.21zm.43.91h.21v1.86h-.21zm.43-.23h.21v2.33h-.21zm.43.46h.21v1.4h-.21zm.43-.7h.21v2.8h-.21zm.43-1.6h.21v6.01h-.21zm.43-2.23h.21v10.46h-.21zm.43-1.4h.21v13.26h-.21zm.43.62h.21v12.02H9.5zm.43 1.64h.21v8.75h-.21zm.43 1.37h.21v6.01h-.21zm.43-1.87H11v9.74h-.21zm.42 1.32h.21v7.1h-.21zm.43-2.64h.21v12.38h-.21zm.43 1.61h.21v9.17h-.21zM12.5 22h.21v6.01h-.21zm.43 1.32h.21v3.37h-.21zm.43-2.51h.21v8.39h-.21zm.43.59H14v7.2h-.21zm.43 1.79h.21v3.62h-.21zm.43.41h.21v2.8h-.21zm.43.57h.21v1.66h-.21zm.43-1.11h.21v3.88h-.21zm.42-2.98h.21v9.84h-.21zm.43 1.06h.21v7.72h-.21zm.43 3.19H17v1.35h-.21zm.86-2.33h.21v6.01h-.21zm-.43 1.4h.21v3.21h-.21zm1.29.15h.21v2.9h-.21zm.43.68h.21v1.55h-.21zm-.86-.76h.21v3.05h-.21zm1.29-.05h.21v3.16h-.21zm.43-.64h.21v4.45h-.21zm.43.38h.21v3.68h-.21zm.42-.49h.21v4.66h-.21zm.43 1.32h.21v2.02h-.21zm.43.37h.21v1.29h-.21zm.43.31h.21v.67h-.21zm.43-.39h.21v1.45h-.21zm.43-1.35h.21v4.14h-.21zm.86.73h.21v2.69h-.21zm-.43.44h.21v1.81h-.21zm1.29-3.45h.21v8.7h-.21zm.43 1.71h.21v5.28h-.21zm-.86-2.3h.21v9.89h-.21zm1.29 3.36h.21v3.16h-.21zM25.8 22h.21v6.01h-.21zm.43 1.42h.21v3.16h-.21zm.43.88h.21v1.4h-.21zm.43-.93h.21v3.26h-.21zm.43-1.37h.21v6.01h-.21zm.43-.93h.21v7.87h-.21zm.43-.76h.21v9.38h-.21zm.43 1.69h.21v6.01h-.21zm.86 1.92h.21v2.17h-.21zm-.43-.6h.21v3.37h-.21zm1.28.05h.21v3.26h-.21zm.43.67h.21v1.91h-.21zm-.85-.51h.21v2.95h-.21zm1.28-.13h.21v3.21h-.21zm.43-1.4h.21v6.01h-.21zm.43-.99h.21v7.98h-.21zm.43 1.77h.21v4.45h-.21zm.43-1.22h.21v6.89h-.21zm.43 1.6h.21v3.68h-.21zm.43-.28h.21v4.25h-.21zm.43-.6h.21v5.44h-.21zm.43-.28h.21v6.01h-.21zm.85 2.02h.21v1.97h-.21zm-.43-.57h.21v3.11h-.21zm1.29.93h.21v1.24h-.21zm.43-.65h.21v2.54h-.21zm-.86-.28h.21v3.11h-.21zm1.29.83h.21v1.45h-.21zm.43-.99h.21v3.42h-.21zm.43-.1h.21v3.62h-.21zm.43-.7h.21v5.02h-.21zm.43.8h.21v3.42h-.21zm.43-1.29h.21v6.01h-.21zm.42-1.71h.21v9.43h-.21zm.43 2.38h.21v4.66h-.21zm.43.65h.21v3.37h-.21zm.86.08h.21v3.21h-.21zm-.43.54h.21v2.12h-.21zm1.29-.05h.21v2.23h-.21zm.43.28h.21v1.66h-.21zm-.86.16h.21v1.35h-.21zm1.29.21h.21v.93h-.21zm.43-6.04h.21v13h-.21zm.43.8h.21v11.4h-.21zm.43-1.76h.21v14.92h-.21zm.42 1.09h.21v12.74h-.21zm.43 1.17h.21v10.41h-.21zm.43 1.32h.21v7.77h-.21zm.43 1.6h.21v4.56h-.21zm.43 1.17h.21v2.23h-.21zm.86-.08h.21v2.38h-.21zm-.43-.34h.21v3.05h-.21zm1.29-.1h.21v3.26h-.21zm.43.93h.21v1.4h-.21zm-.86-.02h.21v1.45h-.21z",fill:t})}),Re="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjMiIGhlaWdodD0iMzMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTEuMSAxNi43MmMwIDMgLjk2IDUuOCAzLjYxIDcuOTVhOS45NiA5Ljk2IDAgMCAwIDYuNSAyLjE3bTAgMHY0LjM0aDQuMzQtOC42N200LjM0LTQuMzRjMi4zNSAwIDQuNDItLjQ4IDYuNS0yLjE3YTkuODcgOS44NyAwIDAgMCAzLjYxLTcuOTVNMTEuMjIgMS44MmMtMS40NSAwLTIuNS4zNy0zLjMuOTNhNS42IDUuNiAwIDAgMC0xLjg0IDIuNGMtLjkgMi4wNi0xLjEgNC43Ny0xLjEgNy4yNCAwIDIuNDYuMiA1LjE3IDEuMSA3LjI0YTUuNiA1LjYgMCAwIDAgMS44NCAyLjRjLjguNTUgMS44NS45MiAzLjMuOTIgMS40NCAwIDIuNS0uMzcgMy4yOS0uOTNhNS42IDUuNiAwIDAgMCAxLjg0LTIuNGMuOS0yLjA2IDEuMS00Ljc3IDEuMS03LjIzIDAtMi40Ny0uMi01LjE4LTEuMS03LjI0YTUuNiA1LjYgMCAwIDAtMS44NC0yLjQgNS41MiA1LjUyIDAgMCAwLTMuMy0uOTNaIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K",ht="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE4Ljc1IDYuMTZjNC4zMSAyLjYgNi40NiAzLjkgNi40NiA1Ljg0IDAgMS45NS0yLjE1IDMuMjQtNi40NiA1Ljg0bC00Ljg0IDIuOTJjLTQuMzEgMi42LTYuNDYgMy44OS04LjA4IDIuOTItMS42Mi0uOTgtMS42Mi0zLjU3LTEuNjItOC43NlY5LjA4YzAtNS4xOSAwLTcuNzggMS42Mi04Ljc2IDEuNjItLjk3IDMuNzcuMzMgOC4wOCAyLjkybDQuODQgMi45MloiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==",Ve="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE0IDMuNWEzLjUgMy41IDAgMSAxIDcgMHYyMmEzLjUgMy41IDAgMSAxLTcgMHYtMjJaIiBmaWxsPSIjZmZmIi8+CiAgPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjkiIHJ4PSIzLjUiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==",lt="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMjUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3QgeD0iLjIxIiB3aWR0aD0iMjYiIGhlaWdodD0iMjUiIHJ4PSI1IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=",vt=({controls:{audioRef:t,audioData:e,isRecordingInProgress:r,recordedBlob:c,duration:u,currentAudioTime:h,audioSrc:L,bufferFromRecordedBlob:m,togglePauseResume:w,startRecording:S,stopRecording:N,saveAudioFile:j,isAvailableRecordedAudio:f,isPausedRecordedAudio:y,isPausedRecording:v,isProcessingStartRecording:I,isProcessingRecordedAudio:z,isCleared:a,formattedDuration:U,formattedRecordingTime:Z,formattedRecordedAudioCurrentTime:ne,clearCanvas:T,setCurrentAudioTime:F,isProcessingOnResize:D,_setIsProcessingOnResize:V,_setIsProcessingAudioOnComplete:re},width:fe="100%",height:q=200,speed:ze=3,backgroundColor:H="transparent",mainBarColor:P="#FFFFFF",secondaryBarColor:J="#5e5e5e",barWidth:Me=2,gap:Se=1,rounded:ce=5,isControlPanelShown:ie=!0,isDownloadAudioButtonShown:se=!1,animateCurrentPick:Q=!0,fullscreen:X=!1,onlyRecording:k=!1,isDefaultUIShown:pe=!0,defaultMicrophoneIconColor:je=P,defaultAudioWaveIconColor:De=P,mainContainerClassName:Ee,canvasContainerClassName:ge,isProgressIndicatorShown:ue=!k,progressIndicatorClassName:Te,isProgressIndicatorTimeShown:oe=!0,progressIndicatorTimeClassName:Ze,isProgressIndicatorOnHoverShown:be=!k,progressIndicatorOnHoverClassName:_e,isProgressIndicatorTimeOnHoverShown:xe=!0,progressIndicatorTimeOnHoverClassName:p,isAudioProcessingTextShown:ae=!0,audioProcessingTextClassName:b,controlButtonsClassName:Y})=>{const[G,_]=n.useState(0),[d,$]=n.useState(0),[x,l]=n.useState(0),[he,ke]=n.useState(0),[le,$e]=n.useState(!1),[He,Ie]=n.useState(window.innerWidth),[we,Pe]=n.useState(!1),ve=He<768,me=Math.trunc(ze),B=Math.trunc(Se),O=Math.trunc(ve&&B>0?Me+1:Me),Le=O+B*O,g=n.useRef(null),Oe=n.useRef([]),de=n.useRef(me),K=n.useRef(O),Ye=n.useRef(O),ee=n.useRef(null),Ne=ot(He),{result:te,setResult:i,run:o}=st({fn:nt,initialValue:[],onMessageReceived:W}),A=ut(M);n.useEffect(()=>{M();const E=()=>{Ne.current!==window.innerWidth&&(f?(Ie(window.innerWidth),V(!0),Pe(!0),A()):(Ie(window.innerWidth),M()))};return window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}},[fe,f]),n.useLayoutEffect(()=>{g.current&&((de.current>=me||!e.length)&&(de.current=e.length?0:me,et({audioData:e,unit:Le,index:K,index2:Ye,canvas:g.current,picks:Oe.current,isRecordingInProgress:r,isPausedRecording:v,backgroundColor:H,mainBarColor:P,secondaryBarColor:J,barWidth:O,rounded:ce,animateCurrentPick:Q,fullscreen:X})),de.current+=1)},[g.current,e,O,H,P,J,ce,X,pe,he]),n.useEffect(()=>{var E,R;if(f)return le?(E=g.current)==null||E.addEventListener("mouseleave",Fe):(R=g.current)==null||R.addEventListener("mouseenter",Ce),()=>{var Ae,Qe;le?(Ae=g.current)==null||Ae.removeEventListener("mouseleave",Fe):(Qe=g.current)==null||Qe.removeEventListener("mouseenter",Ce)}},[le,f]),n.useEffect(()=>{var R;if(!m||!g.current||r||we)return;if(k){T();return}Oe.current=[];const E=m.getChannelData(0);return o({bufferData:E,height:x,width:he,barWidth:O,gap:B}),(R=g.current)==null||R.addEventListener("mousemove",qe),()=>{var Ae;(Ae=g.current)==null||Ae.removeEventListener("mousemove",qe)}},[m,d,x,Se,Me,we]),n.useEffect(()=>{if(!(k||!(te!=null&&te.length)||!g.current||z)){if(a){i([]);return}Xe({barsData:te,canvas:g.current,barWidth:O,gap:B,backgroundColor:H,mainBarColor:P,secondaryBarColor:J,currentAudioTime:h,rounded:ce,duration:u})}},[te,h,a,ce,H,P,J]),n.useEffect(()=>{z&&g.current&&Ue({canvas:g.current,backgroundColor:H})},[z]);function M(){if(!ee.current||!g.current)return;de.current=me;const E=Math.trunc(ee.current.clientHeight*window.devicePixelRatio/2)*2;$(ee.current.clientWidth),l(E),ke(Math.round(ee.current.clientWidth*window.devicePixelRatio)),Pe(!1)}function W(){V(!1),re(!1),t!=null&&t.current&&!D&&(t.current.src=L)}const Ce=()=>{$e(!0)},Fe=()=>{$e(!1)},qe=E=>{_(E.offsetX)},dt=E=>{if(t!=null&&t.current&&g.current){const R=u/d*(E.clientX-g.current.getBoundingClientRect().left);t.current.currentTime=R,F(R)}},Je=h/u*d;return s.jsxs("div",{className:`voice-visualizer ${Ee??""}`,children:[s.jsxs("div",{className:`voice-visualizer__canvas-container ${ge??""}`,ref:ee,style:{width:Be(fe)},children:[s.jsx("canvas",{ref:g,width:he,height:x,onClick:dt,style:{height:Be(q),width:d},children:"Your browser does not support HTML5 Canvas."}),pe&&a&&s.jsxs(s.Fragment,{children:[s.jsx(We,{color:De}),s.jsx(We,{color:De,reflect:!0}),s.jsx("button",{onClick:S,className:"voice-visualizer__canvas-microphone-btn",children:s.jsx(at,{color:je,stroke:.5,className:"voice-visualizer__canvas-microphone-icon"})})]}),ae&&z&&s.jsx("p",{className:`voice-visualizer__canvas-audio-processing ${b??""}`,style:{color:P},children:"Processing Audio..."}),le&&f&&!z&&!ve&&be&&s.jsx("div",{className:`voice-visualizer__progress-indicator-hovered ${_e??""}`,style:{left:G},children:xe&&s.jsx("p",{className:`voice-visualizer__progress-indicator-hovered-time 
                    ${d-G<70?"voice-visualizer__progress-indicator-hovered-time-left":""} 
                    ${p??""}`,children:Ge(u/d*G)})}),ue&&f&&!z&&u?s.jsx("div",{className:`voice-visualizer__progress-indicator ${Te??""}`,style:{left:Je<d-1?Je:d-1},children:oe&&s.jsx("p",{className:`voice-visualizer__progress-indicator-time ${d-h*d/u<70?"voice-visualizer__progress-indicator-time-left":""} ${Ze??""}`,children:ne})}):null]}),ie&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"voice-visualizer__audio-info-container",children:[r&&s.jsx("p",{className:"voice-visualizer__audio-info-time",children:Z}),u&&!z?s.jsx("p",{children:U}):null]}),s.jsxs("div",{className:"voice-visualizer__buttons-container",children:[r&&s.jsx("div",{className:"voice-visualizer__btn-container",children:s.jsx("button",{className:`voice-visualizer__btn-left ${v?"voice-visualizer__btn-left-microphone":""}`,onClick:w,children:s.jsx("img",{src:v?Re:Ve,alt:v?"Play":"Pause"})})}),!a&&s.jsx("button",{className:`voice-visualizer__btn-left ${r||I?"voice-visualizer__visually-hidden":""}`,onClick:w,disabled:z,children:s.jsx("img",{src:y?ht:Ve,alt:y?"Play":"Pause"})}),a&&s.jsxs("button",{className:`voice-visualizer__btn-center voice-visualizer__relative ${I?"voice-visualizer__btn-center--border-transparent":""}`,onClick:S,disabled:I,children:[I&&s.jsx("div",{className:"voice-visualizer__spinner-wrapper",children:s.jsx("div",{className:"voice-visualizer__spinner"})}),s.jsx("img",{src:Re,alt:"Microphone"})]}),s.jsx("button",{className:`voice-visualizer__btn-center voice-visualizer__btn-center-pause ${r?"":"voice-visualizer__visually-hidden"}`,onClick:N,children:s.jsx("img",{src:lt,alt:"Stop"})}),!a&&s.jsx("button",{onClick:T,className:`voice-visualizer__btn ${Y??""}`,disabled:z,children:"Clear"}),se&&c&&s.jsx("button",{onClick:j,className:`voice-visualizer__btn ${Y??""}`,disabled:z,children:"Download Audio"})]})]})]})};function mt({inputDeviceId:t,streamConfig:e,onStartRecording:r,onStopRecording:c,onPausedRecording:u,onResumedRecording:h,onClearCanvas:L,onEndAudioPlayback:m,onStartAudioPlayback:w,onPausedAudioPlayback:S,onResumedAudioPlayback:N,onErrorPlayingAudio:j}={}){const[f,y]=n.useState(!1),[v,I]=n.useState(!1),[z,a]=n.useState(null),[U,Z]=n.useState(new Uint8Array(0)),[ne,T]=n.useState(!1),[F,D]=n.useState(null),[V,re]=n.useState(null),[fe,q]=n.useState(0),[ze,H]=n.useState(0),[P,J]=n.useState(0),[Me,Se]=n.useState(""),[ce,ie]=n.useState(!0),[se,Q]=n.useState(0),[X,k]=n.useState(!0),[pe,je]=n.useState(!1),[De,Ee]=n.useState(!1),[ge,ue]=n.useState(null),[Te,oe]=n.useState(!1),[Ze,be]=n.useState(0),[_e,xe]=n.useState(0),p=n.useRef(null),ae=n.useRef(""),b=n.useRef(null),Y=n.useRef(null),G=n.useRef(null),_=n.useRef(null),d=n.useRef(null),$=n.useRef(null),x=n.useRef(null),l=n.useRef(null),he=!!(V&&!ne),ke=ct(P),le=tt(fe),$e=Ge(se),He=pe||ne;n.useEffect(()=>{if(!f||v)return;const o=setInterval(()=>{const A=performance.now();q(M=>M+(A-ze)),H(A)},1e3);return()=>clearInterval(o)},[ze,v,f]),n.useEffect(()=>{if(ge){K();return}},[ge]),n.useEffect(()=>()=>{K()},[]),n.useEffect(()=>(X||window.addEventListener("beforeunload",Ie),()=>{window.removeEventListener("beforeunload",Ie)}),[X]);const Ie=i=>{i.preventDefault(),i.returnValue=""},we=async i=>{if(i)try{if(i.size===0)throw new Error("Error: The audio blob is empty");const o=URL.createObjectURL(i);Se(o);const A=await i.arrayBuffer(),W=await new AudioContext().decodeAudioData(A);re(W),J(W.duration-.06),ue(null)}catch(o){console.error("Error processing the audio blob:",o),ue(o instanceof Error?o:new Error("Error processing the audio blob"))}},Pe=i=>{i instanceof Blob&&(K(),Ee(!0),k(!1),T(!0),y(!1),q(0),I(!1),l.current=new Audio,D(i),we(i))},ve=i=>{if(!(e!=null&&e.usePCM)||!e.onPCMAvailable||v)return;const o=i.inputBuffer,A=o.getChannelData(0),M=new Float32Array(A),W=!f||v,Ce={recordingId:ae.current,chunkSequence:_e,sampleRate:o.sampleRate,isLastChunk:W};e.onPCMAvailable(M,Ce),xe(Fe=>Fe+1)},me=()=>{oe(!0),ae.current=`rec_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,be(0),xe(0),navigator.mediaDevices.getUserMedia({audio:t?{deviceId:t}:!0}).then(i=>{k(!1),oe(!1),y(!0),H(performance.now()),a(i),b.current=new window.AudioContext,Y.current=b.current.createAnalyser(),G.current=new Uint8Array(Y.current.frequencyBinCount),_.current=b.current.createMediaStreamSource(i),_.current.connect(Y.current),e!=null&&e.usePCM&&e.onPCMAvailable&&(d.current=b.current.createScriptProcessor(4096,1,1),_.current.connect(d.current),d.current.connect(b.current.destination),d.current.addEventListener("audioprocess",ve)),p.current=new MediaRecorder(i),p.current.addEventListener("dataavailable",Le),e!=null&&e.enabled&&e.timeslice?p.current.start(e.timeslice):p.current.start(),r&&r(),B()}).catch(i=>{oe(!1),ue(i instanceof Error?i:new Error("Error starting audio recording"))})},B=()=>{Y.current.getByteTimeDomainData(G.current),Z(new Uint8Array(G.current)),$.current=requestAnimationFrame(B)},O=(i,o=!1)=>{var A;if(!(!e||!e.enabled||!e.onChunkAvailable)&&i.size>0){const M={recordingId:ae.current,chunkSequence:Ze,mimeType:((A=p.current)==null?void 0:A.mimeType)||"audio/webm",isLastChunk:o};e.onChunkAvailable(i,M),be(W=>W+1)}},Le=i=>{if(e!=null&&e.enabled&&i.data.size>0){const o=!p.current||p.current.state==="inactive";O(i.data,o)}p.current||(l.current=new Audio,D(i.data),we(i.data))},g=()=>{l.current&&(Q(l.current.currentTime),x.current=requestAnimationFrame(g))},Oe=()=>{f||Te||(X||K(),me())},de=()=>{var i;if(f){if(y(!1),e!=null&&e.usePCM&&e.onPCMAvailable&&d.current){const o={recordingId:ae.current,chunkSequence:_e,sampleRate:((i=b.current)==null?void 0:i.sampleRate)||44100,isLastChunk:!0};e.onPCMAvailable(new Float32Array(0),o),d.current.removeEventListener("audioprocess",ve),_.current&&_.current.disconnect(d.current),d.current.disconnect()}p.current&&(p.current.stop(),p.current.removeEventListener("dataavailable",Le)),z==null||z.getTracks().forEach(o=>o.stop()),$.current&&cancelAnimationFrame($.current),_.current&&_.current.disconnect(),b.current&&b.current.state!=="closed"&&b.current.close(),T(!0),q(0),I(!1),c&&c()}},K=()=>{$.current&&(cancelAnimationFrame($.current),$.current=null),x.current&&(cancelAnimationFrame(x.current),x.current=null),p.current&&(p.current.removeEventListener("dataavailable",Le),p.current.stop(),p.current=null),d.current&&(d.current.removeEventListener("audioprocess",ve),_.current&&_.current.disconnect(d.current),d.current.disconnect(),d.current=null),z==null||z.getTracks().forEach(i=>i.stop()),l!=null&&l.current&&(l.current.removeEventListener("ended",Ne),l.current.pause(),l.current.src="",l.current=null),b.current=null,Y.current=null,G.current=null,_.current=null,a(null),oe(!1),y(!1),Ee(!1),T(!1),D(null),re(null),q(0),H(0),J(0),Se(""),Q(0),ie(!0),I(!1),je(!1),Z(new Uint8Array(0)),ue(null),k(!0),L&&L()},Ye=()=>{if(l.current&&l.current.paused){const i=l.current.play();i!==void 0&&i.catch(o=>{console.error(o),j&&j(o instanceof Error?o:new Error("Error playing audio"))})}},ee=()=>{var i,o,A;if(f){I(M=>!M),((i=p.current)==null?void 0:i.state)==="recording"?((o=p.current)==null||o.pause(),q(M=>M+(performance.now()-ze)),$.current&&cancelAnimationFrame($.current),u&&u()):($.current=requestAnimationFrame(B),(A=p.current)==null||A.resume(),H(performance.now()),h&&h());return}if(l.current&&he)if(l.current.paused)requestAnimationFrame(g),Ye(),l.current.addEventListener("ended",Ne),ie(!1),w&&se===0&&w(),N&&se!==0&&N();else{x.current&&cancelAnimationFrame(x.current),l.current.removeEventListener("ended",Ne),l.current.pause(),ie(!0);const M=l.current.currentTime;Q(M),l.current.currentTime=M,S&&S()}},Ne=()=>{x.current&&cancelAnimationFrame(x.current),ie(!0),Q(0),l.current&&(l.current.currentTime=0),m&&m()},te=()=>{if(!F)return;const i=rt(F.type||"audio/webm"),o=`recording-${new Date().toISOString()}.${i}`,A=URL.createObjectURL(F),M=document.createElement("a");document.body.appendChild(M),M.style.display="none",M.href=A,M.download=o,M.click(),window.URL.revokeObjectURL(A)};return{audioRef:l,isRecordingInProgress:f,isPausedRecording:v,audioData:U,recordingTime:fe,mediaRecorder:p.current,duration:P,currentAudioTime:se,audioSrc:Me,isPausedRecordedAudio:ce,isProcessingRecordedAudio:He,isCleared:X,isAvailableRecordedAudio:he,recordedBlob:F,bufferFromRecordedBlob:V,formattedDuration:ke,formattedRecordingTime:le,formattedRecordedAudioCurrentTime:$e,startRecording:Oe,togglePauseResume:ee,stopRecording:de,saveAudioFile:te,clearCanvas:K,setCurrentAudioTime:Q,error:ge,isProcessingOnResize:pe,isProcessingStartRecording:Te,isPreloadedBlob:De,setPreloadedAudioBlob:Pe,_setIsProcessingAudioOnComplete:T,_setIsProcessingOnResize:je}}C.VoiceVisualizer=vt,C.useVoiceVisualizer=mt,Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})});
