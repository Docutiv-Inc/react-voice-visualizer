(function(){"use strict";(e=>{try{if(typeof window>"u")return;var i=document.createElement("style");i.appendChild(document.createTextNode(e)),document.head.appendChild(i)}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})(".voice-visualizer__buttons-container{display:flex;justify-content:center;align-items:center;column-gap:20px;row-gap:15px;flex-wrap:wrap;margin-bottom:40px}.voice-visualizer__btn-center{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#fff;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s}.voice-visualizer__btn-center:disabled{opacity:.85;cursor:default}.voice-visualizer__btn-center:hover{background-color:#eaeaea;border:4px solid #9f9f9f}.voice-visualizer__btn-center>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause{background-color:#ff3030}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause:hover{background-color:#ff4f4f}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause>img{height:50%;max-height:16px}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent{border-color:transparent}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent:hover{background-color:#fff}.voice-visualizer__btn-left{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#ff3030;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s,opacity .3s}.voice-visualizer__btn-container{min-width:100px;display:flex;justify-content:flex-end}.voice-visualizer__btn-left:hover{background-color:#ff4f4f}.voice-visualizer__btn-left:disabled{opacity:.6;background-color:#ff3030;cursor:default}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone{background-color:#fff}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-left>img{width:auto;height:50%;max-height:16px}.voice-visualizer__btn-left:hover{border:4px solid #9f9f9f}.voice-visualizer__btn{box-sizing:border-box;min-width:100px;min-height:60px;padding:5px 20px;border-radius:40px;font-size:15px;background-color:#f0f0f0;transition:background-color .3s,opacity .3s}.voice-visualizer__btn:disabled{opacity:.8;background-color:#f0f0f0;cursor:default}.voice-visualizer__btn:hover{background-color:#bebebe}.voice-visualizer__canvas-container{position:relative;width:fit-content;margin:0 auto;overflow:hidden}.voice-visualizer__canvas-container canvas{display:block}.voice-visualizer__canvas-microphone-btn{position:absolute;top:50%;left:50%;width:auto;max-width:12%;min-width:24px;height:50%;max-height:100px;background-color:transparent;border:none;outline:none;transform:translate(-50%,-50%)}.voice-visualizer__canvas-microphone-icon{width:100%;height:100%;will-change:transform;transition:transform .3s}.voice-visualizer__canvas-microphone-btn:hover .voice-visualizer__canvas-microphone-icon{transform:scale(1.03)}.voice-visualizer__canvas-audio-wave-icon{position:absolute;top:50%;left:50%;width:auto;max-width:40%;height:40%;max-height:100px;transform:translate(-118%,-50%) scale(-1)}.voice-visualizer__canvas-audio-wave-icon2{transform:translate(18%,-50%)}.voice-visualizer__canvas-audio-processing{position:absolute;top:50%;left:50%;margin:0;transform:translate(-50%,-50%)}.voice-visualizer__progress-indicator-hovered{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#85858599}.voice-visualizer__progress-indicator-hovered-time{position:absolute;top:3%;left:1px;width:fit-content;margin:0;padding:0 7px;opacity:.8;font-size:12px;border-radius:0 4px 4px 0;background-color:#575757;text-align:left}.voice-visualizer__progress-indicator-hovered-time.voice-visualizer__progress-indicator-hovered-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__progress-indicator{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#efefef}.voice-visualizer__progress-indicator-time{position:absolute;top:3%;left:1px;width:fit-content;box-sizing:border-box;min-width:37px;margin:0;padding:0 7px;font-size:12px;border-radius:0 4px 4px 0;text-align:left;color:#000;font-weight:500;background-color:#efefef}.voice-visualizer__progress-indicator-time.voice-visualizer__progress-indicator-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__audio-info-container{box-sizing:border-box;height:55px;display:flex;align-items:center;justify-content:center;gap:30px}.voice-visualizer__audio-info-time{margin:15px 0;min-width:38px;text-align:left}.voice-visualizer__visually-hidden{position:absolute;width:1px;height:1px;margin:-1px;padding:0;border:4px solid #c5c5c5;white-space:nowrap;clip-path:inset(100%);clip:rect(0 0 0 0);overflow:hidden}.voice-visualizer__relative{position:relative}.voice-visualizer__spinner-wrapper{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:52px;height:52px;display:flex;justify-content:center;align-items:center}.voice-visualizer__spinner{flex-shrink:0;width:100%;height:100%;border:4px solid rgba(197,197,197,.5);border-radius:50%;border-top-color:#b7b7b7;animation:voice-visualizer__spin 1s ease-in-out infinite;-webkit-animation:voice-visualizer__spin 1s ease-in-out infinite}@keyframes voice-visualizer__spin{to{transform:rotate(360deg)}}@-webkit-keyframes voice-visualizer__spin{to{transform:rotate(360deg)}}")})();
(function(b,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("react/jsx-runtime"),require("react")):typeof define=="function"&&define.amd?define(["exports","react/jsx-runtime","react"],s):(b=typeof globalThis<"u"?globalThis:b||self,s(b["react-voice-visualizer"]={},b["react/jsx-runtime"],b.React))})(this,function(b,s,t){"use strict";const Ee=({canvas:e,backgroundColor:r})=>{const n=e.height,i=e.width,o=Math.round(i/2),l=e.getContext("2d");return l?(l.clearRect(0,0,i,n),r!=="transparent"&&(l.fillStyle=r,l.fillRect(0,0,i,n)),{context:l,height:n,width:i,halfWidth:o}):null},we=({context:e,color:r,rounded:n,x:i,y:o,w:l,h:I})=>{e.fillStyle=r,e.beginPath(),e.roundRect?(e.roundRect(i,o,l,I,n),e.fill()):e.fillRect(i,o,l,I)},ke=({barsData:e,canvas:r,barWidth:n,gap:i,backgroundColor:o,mainBarColor:l,secondaryBarColor:I,currentAudioTime:v=0,rounded:g,duration:f})=>{const w=Ee({canvas:r,backgroundColor:o});if(!w)return;const{context:p,height:z}=w,L=v/f;e.forEach((m,d)=>{const M=d/e.length,u=L>M;we({context:p,color:u?I:l,rounded:g,x:d*(n+i*n),y:z/2-m.max,h:m.max*2,w:n})})};function Ve({context:e,color:r,rounded:n,width:i,height:o,barWidth:l}){we({context:e,color:r,rounded:n,x:i/2+l/2,y:o/2-1,h:2,w:i-(i/2+l/2)})}const Je=({audioData:e,unit:r,index:n,index2:i,canvas:o,isRecordingInProgress:l,isPausedRecording:I,picks:v,backgroundColor:g,barWidth:f,mainBarColor:w,secondaryBarColor:p,rounded:z,animateCurrentPick:L,fullscreen:m})=>{const d=Ee({canvas:o,backgroundColor:g});if(!d)return;const{context:M,height:u,width:x,halfWidth:F}=d;if(e!=null&&e.length&&l){const H=Math.max(...e);if(!I){if(i.current>=f){i.current=0;const A=(u-H/258*u)/u*100,J=(-u+H/258*u*2)/u*100,K=n.current===f?{startY:A,barHeight:J}:null;n.current>=r?n.current=f:n.current+=f,v.length>(m?x:F)/f&&v.pop(),v.unshift(K)}i.current+=1}!m&&U(),L&&we({context:M,rounded:z,color:w,x:m?x:F,y:u-H/258*u,h:-u+H/258*u*2,w:f});let Y=(m?x:F)-i.current;v.forEach(A=>{A&&we({context:M,color:w,rounded:z,x:Y,y:A.startY*u/100>u/2-1?u/2-1:A.startY*u/100,h:A.barHeight*u/100>2?A.barHeight*u/100:2,w:f}),Y-=f})}else v.length=0;function U(){Ve({context:M,color:p,rounded:z,width:x,height:u,barWidth:f})}},$e=e=>{const r=Math.floor(e/3600),n=Math.floor(e%3600/60),i=e%60,o=Math.floor((i-Math.floor(i))*1e3);return r>0?`${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}:${String(o).charAt(0)}`:n>0?`${String(n).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}:${String(o).charAt(0)}`:`${String(Math.floor(i)).padStart(2,"0")}:${String(o).charAt(0)}`},Qe=e=>{const r=Math.floor(e/1e3),n=Math.floor(r/3600),i=Math.floor(r%3600/60),o=r%60;return n>0?`${String(n).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(o).padStart(2,"0")}`:`${String(i).padStart(2,"0")}:${String(o).padStart(2,"0")}`};function Oe(e){if(typeof e=="string"){const r=Number(e);if(!Number.isNaN(r))return`${Math.trunc(r/2)*2}px`}return e}const qe=({bufferData:e,height:r,width:n,barWidth:i,gap:o})=>{const l=n/(i+o*i),I=Math.floor(e.length/l),v=r/2;let g=[],f=0;for(let w=0;w<l;w++){const p=[];let z=0;for(let m=0;m<I&&w*I+m<e.length;m++){const d=e[w*I+m];d>0&&(p.push(d),z++)}const L=p.reduce((m,d)=>m+d,0)/z;L>f&&(f=L),g.push({max:L})}if(v*.95>f*v){const w=v*.95/f;g=g.map(p=>({max:p.max>.01?p.max*w:1}))}return g},Re=e=>{if(!e)return"";const r=e.match(/audio\/([^;]+)/);return r&&r.length>=2?`.${r[1]}`:""},Xe=e=>{const r=Math.floor(e/3600),n=Math.floor(e%3600/60),i=e%60,o=Math.floor((i-Math.floor(i))*1e3);return r>0?`${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}}h`:n>0?`${String(n).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}m`:`${String(Math.floor(i)).padStart(2,"0")}:${String(o).charAt(0)}${String(o).charAt(1)}s`},Ke=e=>{onmessage=r=>{postMessage(e(r.data))}};function et({fn:e,initialValue:r,onMessageReceived:n}){const[i,o]=t.useState(r);return{result:i,setResult:o,run:I=>{const v=new Worker(URL.createObjectURL(new Blob([`(${Ke})(${e})`])));v.onmessage=g=>{g.data&&(o(g.data),n&&n(),v.terminate())},v.onerror=g=>{console.error(g.message),v.terminate()},v.postMessage(I)}}}const tt=(e,r=250)=>{const n=t.useRef();return t.useCallback((...i)=>{const o=()=>{clearTimeout(n.current),e(...i)};clearTimeout(n.current),n.current=setTimeout(o,r)},[e,r])};function rt(e){const r=t.useRef(e);return t.useLayoutEffect(()=>{r.current=e},[e]),r}const dt="",nt=({color:e="#000000",stroke:r=2,className:n})=>s.jsx("svg",{viewBox:"0 0 23 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n,children:s.jsx("path",{d:"M1.1 16.72c0 3 .96 5.8 3.61 7.95a9.96 9.96 0 0 0 6.5 2.17m0 0v4.34h4.34-8.67m4.34-4.34c2.35 0 4.42-.48 6.5-2.17a9.87 9.87 0 0 0 3.61-7.95M11.22 1.82c-1.45 0-2.5.37-3.3.93a5.6 5.6 0 0 0-1.84 2.4c-.9 2.06-1.1 4.77-1.1 7.24 0 2.46.2 5.17 1.1 7.24a5.6 5.6 0 0 0 1.84 2.4c.8.55 1.85.92 3.3.92 1.44 0 2.5-.37 3.29-.93a5.6 5.6 0 0 0 1.84-2.4c.9-2.06 1.1-4.77 1.1-7.23 0-2.47-.2-5.18-1.1-7.24a5.6 5.6 0 0 0-1.84-2.4 5.52 5.52 0 0 0-3.3-.93Z",stroke:e,strokeWidth:r,strokeLinecap:"round",strokeLinejoin:"round"})}),Ze=({color:e="#FFFFFF",reflect:r})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0.92 17.54 48.27 14.92",className:`voice-visualizer__canvas-audio-wave-icon ${r?"voice-visualizer__canvas-audio-wave-icon2":""}`,children:s.jsx("path",{d:"M.92 24.63h.21v.75H.92zm.42-1.39h.21v3.52h-.21zm.43.68h.21v2.17h-.21zM2.2 22h.21v6.01H2.2zm.43-1.27h.21v8.55h-.21zm.43 2.07h.21v4.4h-.21zm.43 1.22h.21v1.97h-.21zm.43.47h.21v1.03h-.21zm.43-1.66h.21v4.35h-.21zm.43-1.74h.21v7.82h-.21zm.43 1.94h.21v3.94h-.21zm.43 1.07h.21v1.81h-.21zm.42-.94h.21v3.68h-.21zm.43.91h.21v1.86h-.21zm.43-.23h.21v2.33h-.21zm.43.46h.21v1.4h-.21zm.43-.7h.21v2.8h-.21zm.43-1.6h.21v6.01h-.21zm.43-2.23h.21v10.46h-.21zm.43-1.4h.21v13.26h-.21zm.43.62h.21v12.02H9.5zm.43 1.64h.21v8.75h-.21zm.43 1.37h.21v6.01h-.21zm.43-1.87H11v9.74h-.21zm.42 1.32h.21v7.1h-.21zm.43-2.64h.21v12.38h-.21zm.43 1.61h.21v9.17h-.21zM12.5 22h.21v6.01h-.21zm.43 1.32h.21v3.37h-.21zm.43-2.51h.21v8.39h-.21zm.43.59H14v7.2h-.21zm.43 1.79h.21v3.62h-.21zm.43.41h.21v2.8h-.21zm.43.57h.21v1.66h-.21zm.43-1.11h.21v3.88h-.21zm.42-2.98h.21v9.84h-.21zm.43 1.06h.21v7.72h-.21zm.43 3.19H17v1.35h-.21zm.86-2.33h.21v6.01h-.21zm-.43 1.4h.21v3.21h-.21zm1.29.15h.21v2.9h-.21zm.43.68h.21v1.55h-.21zm-.86-.76h.21v3.05h-.21zm1.29-.05h.21v3.16h-.21zm.43-.64h.21v4.45h-.21zm.43.38h.21v3.68h-.21zm.42-.49h.21v4.66h-.21zm.43 1.32h.21v2.02h-.21zm.43.37h.21v1.29h-.21zm.43.31h.21v.67h-.21zm.43-.39h.21v1.45h-.21zm.43-1.35h.21v4.14h-.21zm.86.73h.21v2.69h-.21zm-.43.44h.21v1.81h-.21zm1.29-3.45h.21v8.7h-.21zm.43 1.71h.21v5.28h-.21zm-.86-2.3h.21v9.89h-.21zm1.29 3.36h.21v3.16h-.21zM25.8 22h.21v6.01h-.21zm.43 1.42h.21v3.16h-.21zm.43.88h.21v1.4h-.21zm.43-.93h.21v3.26h-.21zm.43-1.37h.21v6.01h-.21zm.43-.93h.21v7.87h-.21zm.43-.76h.21v9.38h-.21zm.43 1.69h.21v6.01h-.21zm.86 1.92h.21v2.17h-.21zm-.43-.6h.21v3.37h-.21zm1.28.05h.21v3.26h-.21zm.43.67h.21v1.91h-.21zm-.85-.51h.21v2.95h-.21zm1.28-.13h.21v3.21h-.21zm.43-1.4h.21v6.01h-.21zm.43-.99h.21v7.98h-.21zm.43 1.77h.21v4.45h-.21zm.43-1.22h.21v6.89h-.21zm.43 1.6h.21v3.68h-.21zm.43-.28h.21v4.25h-.21zm.43-.6h.21v5.44h-.21zm.43-.28h.21v6.01h-.21zm.85 2.02h.21v1.97h-.21zm-.43-.57h.21v3.11h-.21zm1.29.93h.21v1.24h-.21zm.43-.65h.21v2.54h-.21zm-.86-.28h.21v3.11h-.21zm1.29.83h.21v1.45h-.21zm.43-.99h.21v3.42h-.21zm.43-.1h.21v3.62h-.21zm.43-.7h.21v5.02h-.21zm.43.8h.21v3.42h-.21zm.43-1.29h.21v6.01h-.21zm.42-1.71h.21v9.43h-.21zm.43 2.38h.21v4.66h-.21zm.43.65h.21v3.37h-.21zm.86.08h.21v3.21h-.21zm-.43.54h.21v2.12h-.21zm1.29-.05h.21v2.23h-.21zm.43.28h.21v1.66h-.21zm-.86.16h.21v1.35h-.21zm1.29.21h.21v.93h-.21zm.43-6.04h.21v13h-.21zm.43.8h.21v11.4h-.21zm.43-1.76h.21v14.92h-.21zm.42 1.09h.21v12.74h-.21zm.43 1.17h.21v10.41h-.21zm.43 1.32h.21v7.77h-.21zm.43 1.6h.21v4.56h-.21zm.43 1.17h.21v2.23h-.21zm.86-.08h.21v2.38h-.21zm-.43-.34h.21v3.05h-.21zm1.29-.1h.21v3.26h-.21zm.43.93h.21v1.4h-.21zm-.86-.02h.21v1.45h-.21z",fill:e})}),Fe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjMiIGhlaWdodD0iMzMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTEuMSAxNi43MmMwIDMgLjk2IDUuOCAzLjYxIDcuOTVhOS45NiA5Ljk2IDAgMCAwIDYuNSAyLjE3bTAgMHY0LjM0aDQuMzQtOC42N200LjM0LTQuMzRjMi4zNSAwIDQuNDItLjQ4IDYuNS0yLjE3YTkuODcgOS44NyAwIDAgMCAzLjYxLTcuOTVNMTEuMjIgMS44MmMtMS40NSAwLTIuNS4zNy0zLjMuOTNhNS42IDUuNiAwIDAgMC0xLjg0IDIuNGMtLjkgMi4wNi0xLjEgNC43Ny0xLjEgNy4yNCAwIDIuNDYuMiA1LjE3IDEuMSA3LjI0YTUuNiA1LjYgMCAwIDAgMS44NCAyLjRjLjguNTUgMS44NS45MiAzLjMuOTIgMS40NCAwIDIuNS0uMzcgMy4yOS0uOTNhNS42IDUuNiAwIDAgMCAxLjg0LTIuNGMuOS0yLjA2IDEuMS00Ljc3IDEuMS03LjIzIDAtMi40Ny0uMi01LjE4LTEuMS03LjI0YTUuNiA1LjYgMCAwIDAtMS44NC0yLjQgNS41MiA1LjUyIDAgMCAwLTMuMy0uOTNaIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K",it="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE4Ljc1IDYuMTZjNC4zMSAyLjYgNi40NiAzLjkgNi40NiA1Ljg0IDAgMS45NS0yLjE1IDMuMjQtNi40NiA1Ljg0bC00Ljg0IDIuOTJjLTQuMzEgMi42LTYuNDYgMy44OS04LjA4IDIuOTItMS42Mi0uOTgtMS42Mi0zLjU3LTEuNjItOC43NlY5LjA4YzAtNS4xOSAwLTcuNzggMS42Mi04Ljc2IDEuNjItLjk3IDMuNzcuMzMgOC4wOCAyLjkybDQuODQgMi45MloiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==",Ue="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE0IDMuNWEzLjUgMy41IDAgMSAxIDcgMHYyMmEzLjUgMy41IDAgMSAxLTcgMHYtMjJaIiBmaWxsPSIjZmZmIi8+CiAgPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjkiIHJ4PSIzLjUiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==",st="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMjUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3QgeD0iLjIxIiB3aWR0aD0iMjYiIGhlaWdodD0iMjUiIHJ4PSI1IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=",ct=({controls:{audioRef:e,audioData:r,isRecordingInProgress:n,recordedBlob:i,duration:o,currentAudioTime:l,audioSrc:I,bufferFromRecordedBlob:v,togglePauseResume:g,startRecording:f,stopRecording:w,saveAudioFile:p,isAvailableRecordedAudio:z,isPausedRecordedAudio:L,isPausedRecording:m,isProcessingStartRecording:d,isProcessingRecordedAudio:M,isCleared:u,formattedDuration:x,formattedRecordingTime:F,formattedRecordedAudioCurrentTime:U,clearCanvas:H,setCurrentAudioTime:Y,isProcessingOnResize:A,_setIsProcessingOnResize:J,_setIsProcessingAudioOnComplete:K},width:G="100%",height:le=200,speed:ee=3,backgroundColor:P="transparent",mainBarColor:D="#FFFFFF",secondaryBarColor:$="#5e5e5e",barWidth:te=2,gap:Le=1,rounded:O=5,isControlPanelShown:re=!0,isDownloadAudioButtonShown:Q=!1,animateCurrentPick:ne=!0,fullscreen:ie=!1,onlyRecording:q=!1,isDefaultUIShown:ve=!0,defaultMicrophoneIconColor:_e=D,defaultAudioWaveIconColor:me=D,mainContainerClassName:fe,canvasContainerClassName:se,isProgressIndicatorShown:Ne=!q,progressIndicatorClassName:ce,isProgressIndicatorTimeShown:S=!0,progressIndicatorTimeClassName:Z,isProgressIndicatorOnHoverShown:R=!q,progressIndicatorOnHoverClassName:oe,isProgressIndicatorTimeOnHoverShown:X=!0,progressIndicatorTimeOnHoverClassName:T,isAudioProcessingTextShown:E=!0,audioProcessingTextClassName:h,controlButtonsClassName:de})=>{const[ze,Ce]=t.useState(0),[j,be]=t.useState(0),[ae,ye]=t.useState(0),[ge,xe]=t.useState(0),[B,ue]=t.useState(!1),[Me,Ae]=t.useState(window.innerWidth),[je,W]=t.useState(!1),Te=Me<768,he=Math.trunc(ee),k=Math.trunc(Le),_=Math.trunc(Te&&k>0?te+1:te),c=_+k*_,a=t.useRef(null),C=t.useRef([]),N=t.useRef(he),De=t.useRef(_),at=t.useRef(_),Se=t.useRef(null),ut=rt(Me),{result:pe,setResult:ht,run:lt}=et({fn:qe,initialValue:[],onMessageReceived:mt}),vt=tt(He);t.useEffect(()=>{He();const y=()=>{ut.current!==window.innerWidth&&(z?(Ae(window.innerWidth),J(!0),W(!0),vt()):(Ae(window.innerWidth),He()))};return window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y)}},[G,z]),t.useLayoutEffect(()=>{a.current&&((N.current>=he||!r.length)&&(N.current=r.length?0:he,Je({audioData:r,unit:c,index:De,index2:at,canvas:a.current,picks:C.current,isRecordingInProgress:n,isPausedRecording:m,backgroundColor:P,mainBarColor:D,secondaryBarColor:$,barWidth:_,rounded:O,animateCurrentPick:ne,fullscreen:ie})),N.current+=1)},[a.current,r,_,P,D,$,O,ie,ve,ge]),t.useEffect(()=>{var y,V;if(z)return B?(y=a.current)==null||y.addEventListener("mouseleave",Ge):(V=a.current)==null||V.addEventListener("mouseenter",Ye),()=>{var Ie,We;B?(Ie=a.current)==null||Ie.removeEventListener("mouseleave",Ge):(We=a.current)==null||We.removeEventListener("mouseenter",Ye)}},[B,z]),t.useEffect(()=>{var V;if(!v||!a.current||n||je)return;if(q){H();return}C.current=[];const y=v.getChannelData(0);return lt({bufferData:y,height:ae,width:ge,barWidth:_,gap:k}),(V=a.current)==null||V.addEventListener("mousemove",Pe),()=>{var Ie;(Ie=a.current)==null||Ie.removeEventListener("mousemove",Pe)}},[v,j,ae,Le,te,je]),t.useEffect(()=>{if(!(q||!(pe!=null&&pe.length)||!a.current||M)){if(u){ht([]);return}ke({barsData:pe,canvas:a.current,barWidth:_,gap:k,backgroundColor:P,mainBarColor:D,secondaryBarColor:$,currentAudioTime:l,rounded:O,duration:o})}},[pe,l,u,O,P,D,$]),t.useEffect(()=>{M&&a.current&&Ee({canvas:a.current,backgroundColor:P})},[M]);function He(){if(!Se.current||!a.current)return;N.current=he;const y=Math.trunc(Se.current.clientHeight*window.devicePixelRatio/2)*2;be(Se.current.clientWidth),ye(y),xe(Math.round(Se.current.clientWidth*window.devicePixelRatio)),W(!1)}function mt(){J(!1),K(!1),e!=null&&e.current&&!A&&(e.current.src=I)}const Ye=()=>{ue(!0)},Ge=()=>{ue(!1)},Pe=y=>{Ce(y.offsetX)},ft=y=>{if(e!=null&&e.current&&a.current){const V=o/j*(y.clientX-a.current.getBoundingClientRect().left);e.current.currentTime=V,Y(V)}},Be=l/o*j;return s.jsxs("div",{className:`voice-visualizer ${fe??""}`,children:[s.jsxs("div",{className:`voice-visualizer__canvas-container ${se??""}`,ref:Se,style:{width:Oe(G)},children:[s.jsx("canvas",{ref:a,width:ge,height:ae,onClick:ft,style:{height:Oe(le),width:j},children:"Your browser does not support HTML5 Canvas."}),ve&&u&&s.jsxs(s.Fragment,{children:[s.jsx(Ze,{color:me}),s.jsx(Ze,{color:me,reflect:!0}),s.jsx("button",{onClick:f,className:"voice-visualizer__canvas-microphone-btn",children:s.jsx(nt,{color:_e,stroke:.5,className:"voice-visualizer__canvas-microphone-icon"})})]}),E&&M&&s.jsx("p",{className:`voice-visualizer__canvas-audio-processing ${h??""}`,style:{color:D},children:"Processing Audio..."}),B&&z&&!M&&!Te&&R&&s.jsx("div",{className:`voice-visualizer__progress-indicator-hovered ${oe??""}`,style:{left:ze},children:X&&s.jsx("p",{className:`voice-visualizer__progress-indicator-hovered-time 
                    ${j-ze<70?"voice-visualizer__progress-indicator-hovered-time-left":""} 
                    ${T??""}`,children:$e(o/j*ze)})}),Ne&&z&&!M&&o?s.jsx("div",{className:`voice-visualizer__progress-indicator ${ce??""}`,style:{left:Be<j-1?Be:j-1},children:S&&s.jsx("p",{className:`voice-visualizer__progress-indicator-time ${j-l*j/o<70?"voice-visualizer__progress-indicator-time-left":""} ${Z??""}`,children:U})}):null]}),re&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"voice-visualizer__audio-info-container",children:[n&&s.jsx("p",{className:"voice-visualizer__audio-info-time",children:F}),o&&!M?s.jsx("p",{children:x}):null]}),s.jsxs("div",{className:"voice-visualizer__buttons-container",children:[n&&s.jsx("div",{className:"voice-visualizer__btn-container",children:s.jsx("button",{className:`voice-visualizer__btn-left ${m?"voice-visualizer__btn-left-microphone":""}`,onClick:g,children:s.jsx("img",{src:m?Fe:Ue,alt:m?"Play":"Pause"})})}),!u&&s.jsx("button",{className:`voice-visualizer__btn-left ${n||d?"voice-visualizer__visually-hidden":""}`,onClick:g,disabled:M,children:s.jsx("img",{src:L?it:Ue,alt:L?"Play":"Pause"})}),u&&s.jsxs("button",{className:`voice-visualizer__btn-center voice-visualizer__relative ${d?"voice-visualizer__btn-center--border-transparent":""}`,onClick:f,disabled:d,children:[d&&s.jsx("div",{className:"voice-visualizer__spinner-wrapper",children:s.jsx("div",{className:"voice-visualizer__spinner"})}),s.jsx("img",{src:Fe,alt:"Microphone"})]}),s.jsx("button",{className:`voice-visualizer__btn-center voice-visualizer__btn-center-pause ${n?"":"voice-visualizer__visually-hidden"}`,onClick:w,children:s.jsx("img",{src:st,alt:"Stop"})}),!u&&s.jsx("button",{onClick:H,className:`voice-visualizer__btn ${de??""}`,disabled:M,children:"Clear"}),Q&&i&&s.jsx("button",{onClick:p,className:`voice-visualizer__btn ${de??""}`,disabled:M,children:"Download Audio"})]})]})]})};function ot({inputDeviceId:e,onStartRecording:r,onStopRecording:n,onPausedRecording:i,onResumedRecording:o,onClearCanvas:l,onEndAudioPlayback:I,onStartAudioPlayback:v,onPausedAudioPlayback:g,onResumedAudioPlayback:f,onErrorPlayingAudio:w}={}){const[p,z]=t.useState(!1),[L,m]=t.useState(!1),[d,M]=t.useState(null),[u,x]=t.useState(new Uint8Array(0)),[F,U]=t.useState(!1),[H,Y]=t.useState(null),[A,J]=t.useState(null),[K,G]=t.useState(0),[le,ee]=t.useState(0),[P,D]=t.useState(0),[$,te]=t.useState(""),[Le,O]=t.useState(!0),[re,Q]=t.useState(0),[ne,ie]=t.useState(!0),[q,ve]=t.useState(!1),[_e,me]=t.useState(!1),[fe,se]=t.useState(null),[Ne,ce]=t.useState(!1),S=t.useRef(null),Z=t.useRef(null),R=t.useRef(null),oe=t.useRef(null),X=t.useRef(null),T=t.useRef(null),E=t.useRef(null),h=t.useRef(null),de=!!(A&&!F),ze=Xe(P),Ce=Qe(K),j=$e(re),be=q||F;t.useEffect(()=>{if(!p||L)return;const a=setInterval(()=>{const C=performance.now();G(N=>N+(C-le)),ee(C)},1e3);return()=>clearInterval(a)},[le,L,p]),t.useEffect(()=>{if(fe){W();return}},[fe]),t.useEffect(()=>()=>{W()},[]),t.useEffect(()=>(ne||window.addEventListener("beforeunload",ae),()=>{window.removeEventListener("beforeunload",ae)}),[ne]);const ae=c=>{c.preventDefault(),c.returnValue=""},ye=async c=>{if(c)try{if(c.size===0)throw new Error("Error: The audio blob is empty");const a=URL.createObjectURL(c);te(a);const C=await c.arrayBuffer(),De=await new AudioContext().decodeAudioData(C);J(De),D(De.duration-.06),se(null)}catch(a){console.error("Error processing the audio blob:",a),se(a instanceof Error?a:new Error("Error processing the audio blob"))}},ge=c=>{c instanceof Blob&&(W(),me(!0),ie(!1),U(!0),z(!1),G(0),m(!1),h.current=new Audio,Y(c),ye(c))},xe=()=>{ce(!0),navigator.mediaDevices.getUserMedia({audio:e?{deviceId:e}:!0}).then(c=>{ie(!1),ce(!1),z(!0),ee(performance.now()),M(c),Z.current=new window.AudioContext,R.current=Z.current.createAnalyser(),oe.current=new Uint8Array(R.current.frequencyBinCount),X.current=Z.current.createMediaStreamSource(c),X.current.connect(R.current),S.current=new MediaRecorder(c),S.current.addEventListener("dataavailable",ue),S.current.start(),r&&r(),B()}).catch(c=>{ce(!1),se(c instanceof Error?c:new Error("Error starting audio recording"))})},B=()=>{R.current.getByteTimeDomainData(oe.current),x(new Uint8Array(oe.current)),T.current=requestAnimationFrame(B)},ue=c=>{S.current&&(S.current=null,h.current=new Audio,Y(c.data),ye(c.data))},Me=()=>{h.current&&(Q(h.current.currentTime),E.current=requestAnimationFrame(Me))},Ae=()=>{p||Ne||(ne||W(),xe())},je=()=>{p&&(z(!1),S.current&&(S.current.stop(),S.current.removeEventListener("dataavailable",ue)),d==null||d.getTracks().forEach(c=>c.stop()),T.current&&cancelAnimationFrame(T.current),X.current&&X.current.disconnect(),Z.current&&Z.current.state!=="closed"&&Z.current.close(),U(!0),G(0),m(!1),n&&n())},W=()=>{T.current&&(cancelAnimationFrame(T.current),T.current=null),E.current&&(cancelAnimationFrame(E.current),E.current=null),S.current&&(S.current.removeEventListener("dataavailable",ue),S.current.stop(),S.current=null),d==null||d.getTracks().forEach(c=>c.stop()),h!=null&&h.current&&(h.current.removeEventListener("ended",k),h.current.pause(),h.current.src="",h.current=null),Z.current=null,R.current=null,oe.current=null,X.current=null,M(null),ce(!1),z(!1),me(!1),U(!1),Y(null),J(null),G(0),ee(0),D(0),te(""),Q(0),O(!0),m(!1),ve(!1),x(new Uint8Array(0)),se(null),ie(!0),l&&l()},Te=()=>{if(h.current&&h.current.paused){const c=h.current.play();c!==void 0&&c.catch(a=>{console.error(a),w&&w(a instanceof Error?a:new Error("Error playing audio"))})}},he=()=>{var c,a,C;if(p){m(N=>!N),((c=S.current)==null?void 0:c.state)==="recording"?((a=S.current)==null||a.pause(),G(N=>N+(performance.now()-le)),T.current&&cancelAnimationFrame(T.current),i&&i()):(T.current=requestAnimationFrame(B),(C=S.current)==null||C.resume(),ee(performance.now()),o&&o());return}if(h.current&&de)if(h.current.paused)requestAnimationFrame(Me),Te(),h.current.addEventListener("ended",k),O(!1),v&&re===0&&v(),f&&re!==0&&f();else{E.current&&cancelAnimationFrame(E.current),h.current.removeEventListener("ended",k),h.current.pause(),O(!0);const N=h.current.currentTime;Q(N),h.current.currentTime=N,g&&g()}},k=()=>{E.current&&cancelAnimationFrame(E.current),O(!0),h!=null&&h.current&&(h.current.currentTime=0,Q(0),I&&I())},_=()=>{var a;if(!$)return;const c=document.createElement("a");c.href=$,c.download=`recorded_audio${Re((a=S.current)==null?void 0:a.mimeType)}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL($)};return{audioRef:h,isRecordingInProgress:p,isPausedRecording:L,audioData:u,recordingTime:K,isProcessingRecordedAudio:be,recordedBlob:H,mediaRecorder:S.current,duration:P,currentAudioTime:re,audioSrc:$,isPausedRecordedAudio:Le,bufferFromRecordedBlob:A,isCleared:ne,isAvailableRecordedAudio:de,formattedDuration:ze,formattedRecordingTime:Ce,formattedRecordedAudioCurrentTime:j,startRecording:Ae,togglePauseResume:he,stopRecording:je,saveAudioFile:_,clearCanvas:W,setCurrentAudioTime:Q,error:fe,isProcessingOnResize:q,isProcessingStartRecording:Ne,isPreloadedBlob:_e,setPreloadedAudioBlob:ge,_setIsProcessingAudioOnComplete:U,_setIsProcessingOnResize:ve}}b.VoiceVisualizer=ct,b.useVoiceVisualizer=ot,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});
